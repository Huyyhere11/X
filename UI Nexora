
local b64 = "bG9jYWwgTWFya2V0cGxhY2VTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJNYXJrZXRwbGFjZVNlcnZpY2UiKQpsb2NhbCBVc2VySW5wdXRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQpsb2NhbCBIdHRwU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIFBsYXllck1vdXNlID0gUGxheWVyOkdldE1vdXNlKCkKCmxvY2FsIGlzTW9iaWxlID0gVXNlcklucHV0U2VydmljZS5Ub3VjaEVuYWJsZWQgYW5kIG5vdCBVc2VySW5wdXRTZXJ2aWNlLktleWJvYXJkRW5hYmxlZApNaW5pbWl6ZXJJY29uID0gInJieGFzc2V0aWQ6Ly85MTMyNDI0NjA5NzM4MyIsCiAgICBNaW5pbWl6ZUtleSA9IGlzTW9iaWxlIGFuZCBuaWwgb3IgRW51bS5LZXlDb2RlLlJpZ2h0Q29udHJvbCwKICAgIE1pbmltaXplckljb25TaXplID0gVURpbTIuZnJvbU9mZnNldCg0MCwgNDApCgoKbG9jYWwgcmVkemxpYiA9IHsKCVRoZW1lcyA9IHsKCQlEYXJrZXIgPSB7CgkJCVsiQ29sb3IgSHViIDEiXSA9IENvbG9yU2VxdWVuY2UubmV3KHsKCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC4wMCwgQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAyNSkpLAoJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLjUwLCBDb2xvcjMuZnJvbVJHQigzMi41LCAzMi41LCAzMi41KSksCgkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEuMDAsIENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMjUpKQoJCQl9KSwKCQkJWyJDb2xvciBIdWIgMiJdID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCAzMCksCgkJCVsiQ29sb3IgU3Ryb2tlIl0gPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDQwKSwKCQkJWyJDb2xvciBUaGVtZSJdID0gQ29sb3IzLmZyb21SR0IoODgsIDEwMSwgMjQyKSwKCQkJWyJDb2xvciBUZXh0Il0gPSBDb2xvcjMuZnJvbVJHQigyNDMsIDI0MywgMjQzKSwKCQkJWyJDb2xvciBEYXJrIFRleHQiXSA9IENvbG9yMy5mcm9tUkdCKDE4MCwgMTgwLCAxODApCgkJfSwKCQlEYXJrID0gewoJCQlbIkNvbG9yIEh1YiAxIl0gPSBDb2xvclNlcXVlbmNlLm5ldyh7CgkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuMDAsIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNDApKSwKCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC41MCwgQ29sb3IzLmZyb21SR0IoNDcuNSwgNDcuNSwgNDcuNSkpLAoJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLjAwLCBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDQwKSkKCQkJfSksCgkJCVsiQ29sb3IgSHViIDIiXSA9IENvbG9yMy5mcm9tUkdCKDQ1LCA0NSwgNDUpLAoJCQlbIkNvbG9yIFN0cm9rZSJdID0gQ29sb3IzLmZyb21SR0IoNjUsIDY1LCA2NSksCgkJCVsiQ29sb3IgVGhlbWUiXSA9IENvbG9yMy5mcm9tUkdCKDY1LCAxNTAsIDI1NSksCgkJCVsiQ29sb3IgVGV4dCJdID0gQ29sb3IzLmZyb21SR0IoMjQ1LCAyNDUsIDI0NSksCgkJCVsiQ29sb3IgRGFyayBUZXh0Il0gPSBDb2xvcjMuZnJvbVJHQigxOTAsIDE5MCwgMTkwKQoJCX0sCgkJUHVycGxlID0gewoJCQlbIkNvbG9yIEh1YiAxIl0gPSBDb2xvclNlcXVlbmNlLm5ldyh7CgkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuMDAsIENvbG9yMy5mcm9tUkdCKDI3LjUsIDI1LCAzMCkpLAoJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLjUwLCBDb2xvcjMuZnJvbVJHQigzMi41LCAzMi41LCAzMi41KSksCgkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEuMDAsIENvbG9yMy5mcm9tUkdCKDI3LjUsIDI1LCAzMCkpCgkJCX0pLAoJCQlbIkNvbG9yIEh1YiAyIl0gPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKSwKCQkJWyJDb2xvciBTdHJva2UiXSA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNDApLAoJCQlbIkNvbG9yIFRoZW1lIl0gPSBDb2xvcjMuZnJvbVJHQigxNTAsIDAsIDI1NSksCgkJCVsiQ29sb3IgVGV4dCJdID0gQ29sb3IzLmZyb21SR0IoMjQwLCAyNDAsIDI0MCksCgkJCVsiQ29sb3IgRGFyayBUZXh0Il0gPSBDb2xvcjMuZnJvbVJHQigxODAsIDE4MCwgMTgwKQoJCX0KCX0sCglJbmZvID0gewoJCVZlcnNpb24gPSAiMS4xLjAiCgl9LAoJU2F2ZSA9IHsKCQlVSVNpemUgPSB7NTUwLCAzODB9LAoJCVRhYlNpemUgPSAxNjAsCgkJVGhlbWUgPSAiRGFya2VyIgoJfSwKCVNldHRpbmdzID0ge30sCglDb25uZWN0aW9uID0ge30sCglJbnN0YW5jZXMgPSB7fSwKCUVsZW1lbnRzID0ge30sCglPcHRpb25zID0ge30sCglGbGFncyA9IHt9LAoJVGFicyA9IHt9LAoJSWNvbnMgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0h1eXloZXJlMTEvWC9yZWZzL2hlYWRzL21haW4vSWNvbiIpKSgpCn0KCmxvY2FsIFZpZXdwb3J0U2l6ZSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLlZpZXdwb3J0U2l6ZQpsb2NhbCBVSVNjYWxlID0gVmlld3BvcnRTaXplLlkgLyA0NTAKCmxvY2FsIFNldHRpbmdzID0gcmVkemxpYi5TZXR0aW5ncwpsb2NhbCBGbGFncyA9IHJlZHpsaWIuRmxhZ3MKCmxvY2FsIFNldFByb3BzLCBTZXRDaGlsZHJlbiwgSW5zZXJ0VGhlbWUsIENyZWF0ZSBkbwoJSW5zZXJ0VGhlbWUgPSBmdW5jdGlvbihJbnN0YW5jZSwgVHlwZSkKCQl0YWJsZS5pbnNlcnQocmVkemxpYi5JbnN0YW5jZXMsIHsKCQkJSW5zdGFuY2UgPSBJbnN0YW5jZSwKCQkJVHlwZSA9IFR5cGUKCQl9KQoJCXJldHVybiBJbnN0YW5jZQoJZW5kCgkKCVNldENoaWxkcmVuID0gZnVuY3Rpb24oSW5zdGFuY2UsIENoaWxkcmVuKQoJCWlmIENoaWxkcmVuIHRoZW4KCQkJdGFibGUuZm9yZWFjaChDaGlsZHJlbiwgZnVuY3Rpb24oXyxDaGlsZCkKCQkJCUNoaWxkLlBhcmVudCA9IEluc3RhbmNlCgkJCWVuZCkKCQllbmQKCQlyZXR1cm4gSW5zdGFuY2UKCWVuZAoJCglTZXRQcm9wcyA9IGZ1bmN0aW9uKEluc3RhbmNlLCBQcm9wcykKCQlpZiBQcm9wcyB0aGVuCgkJCXRhYmxlLmZvcmVhY2goUHJvcHMsIGZ1bmN0aW9uKHByb3AsIHZhbHVlKQoJCQkJSW5zdGFuY2VbcHJvcF0gPSB2YWx1ZQoJCQllbmQpCgkJZW5kCgkJcmV0dXJuIEluc3RhbmNlCgllbmQKCQoJQ3JlYXRlID0gZnVuY3Rpb24oLi4uKQoJCWxvY2FsIGFyZ3MgPSB7Li4ufQoJCWlmIHR5cGUoYXJncykgfj0gInRhYmxlIiB0aGVuIHJldHVybiBlbmQKCQlsb2NhbCBuZXcgPSBJbnN0YW5jZS5uZXcoYXJnc1sxXSkKCQlsb2NhbCBDaGlsZHJlbiA9IHt9CgkJCgkJaWYgdHlwZShhcmdzWzJdKSA9PSAidGFibGUiIHRoZW4KCQkJU2V0UHJvcHMobmV3LCBhcmdzWzJdKQoJCQlTZXRDaGlsZHJlbihuZXcsIGFyZ3NbM10pCgkJCUNoaWxkcmVuID0gYXJnc1szXSBvciB7fQoJCWVsc2VpZiB0eXBlb2YoYXJnc1syXSkgPT0gIkluc3RhbmNlIiB0aGVuCgkJCW5ldy5QYXJlbnQgPSBhcmdzWzJdCgkJCVNldFByb3BzKG5ldywgYXJnc1szXSkKCQkJU2V0Q2hpbGRyZW4obmV3LCBhcmdzWzRdKQoJCQlDaGlsZHJlbiA9IGFyZ3NbNF0gb3Ige30KCQllbmQKCQlyZXR1cm4gbmV3CgllbmQKCQoJbG9jYWwgZnVuY3Rpb24gU2F2ZShmaWxlKQoJCWlmIHJlYWRmaWxlIGFuZCBpc2ZpbGUgYW5kIGlzZmlsZShmaWxlKSB0aGVuCgkJCWxvY2FsIGRlY29kZSA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVhZGZpbGUoZmlsZSkpCgkJCQoJCQlpZiB0eXBlKGRlY29kZSkgPT0gInRhYmxlIiB0aGVuCgkJCQlpZiByYXdnZXQoZGVjb2RlLCAiVUlTaXplIikgdGhlbiByZWR6bGliLlNhdmVbIlVJU2l6ZSJdID0gZGVjb2RlWyJVSVNpemUiXSBlbmQKCQkJCWlmIHJhd2dldChkZWNvZGUsICJUYWJTaXplIikgdGhlbiByZWR6bGliLlNhdmVbIlRhYlNpemUiXSA9IGRlY29kZVsiVGFiU2l6ZSJdIGVuZAoJCQkJaWYgcmF3Z2V0KGRlY29kZSwgIlRoZW1lIikgYW5kIFZlcmlmeVRoZW1lKGRlY29kZVsiVGhlbWUiXSkgdGhlbiByZWR6bGliLlNhdmVbIlRoZW1lIl0gPSBkZWNvZGVbIlRoZW1lIl0gZW5kCgkJCWVuZAoJCWVuZAoJZW5kCgkKCXBjYWxsKFNhdmUsICJyZWR6IGxpYnJhcnkgVjUuanNvbiIpCmVuZAoKbG9jYWwgRnVuY3MgPSB7fSBkbwoJZnVuY3Rpb24gRnVuY3M6SW5zZXJ0Q2FsbGJhY2sodGFiLCBmdW5jKQoJCWlmIHR5cGUoZnVuYykgPT0gImZ1bmN0aW9uIiB0aGVuCgkJCXRhYmxlLmluc2VydCh0YWIsIGZ1bmMpCgkJZW5kCgkJcmV0dXJuIGZ1bmMKCWVuZAoJCglmdW5jdGlvbiBGdW5jczpGaXJlQ2FsbGJhY2sodGFiLCAuLi4pCgkJZm9yIF8sdiBpbiBpcGFpcnModGFiKSBkbwoJCQlpZiB0eXBlKHYpID09ICJmdW5jdGlvbiIgdGhlbgoJCQkJdGFzay5zcGF3bih2LCAuLi4pCgkJCWVuZAoJCWVuZAoJZW5kCgkKCWZ1bmN0aW9uIEZ1bmNzOlRvZ2dsZVZpc2libGUoT2JqLCBCb29sKQoJCU9iai5WaXNpYmxlID0gQm9vbCB+PSBuaWwgYW5kIEJvb2wgb3IgT2JqLlZpc2libGUKCWVuZAoJCglmdW5jdGlvbiBGdW5jczpUb2dnbGVQYXJlbnQoT2JqLCBQYXJlbnQpCgkJaWYgQm9vbCB+PSBuaWwgdGhlbgoJCQlPYmouUGFyZW50ID0gQm9vbAoJCWVsc2UKCQkJT2JqLlBhcmVudCA9IG5vdCBPYmouUGFyZW50IGFuZCBQYXJlbnQKCQllbmQKCWVuZAoJCglmdW5jdGlvbiBGdW5jczpHZXRDb25uZWN0aW9uRnVuY3Rpb25zKENvbm5lY3RlZEZ1bmNzLCBmdW5jKQoJCWxvY2FsIENvbm5lY3RlZCA9IHsgRnVuY3Rpb24gPSBmdW5jLCBDb25uZWN0ZWQgPSB0cnVlIH0KCQkKCQlmdW5jdGlvbiBDb25uZWN0ZWQ6RGlzY29ubmVjdCgpCgkJCWlmIHNlbGYuQ29ubmVjdGVkIHRoZW4KCQkJCXRhYmxlLnJlbW92ZShDb25uZWN0ZWRGdW5jcywgdGFibGUuZmluZChDb25uZWN0ZWRGdW5jcywgc2VsZi5GdW5jdGlvbikpCgkJCQlzZWxmLkNvbm5lY3RlZCA9IGZhbHNlCgkJCWVuZAoJCWVuZAoJCQoJCWZ1bmN0aW9uIENvbm5lY3RlZDpGaXJlKC4uLikKCQkJaWYgc2VsZi5Db25uZWN0ZWQgdGhlbgoJCQkJdGFzay5zcGF3bihzZWxmLkZ1bmN0aW9uLCAuLi4pCgkJCWVuZAoJCWVuZAoJCQoJCXJldHVybiBDb25uZWN0ZWQKCWVuZAoJCglmdW5jdGlvbiBGdW5jczpHZXRDYWxsYmFjayhDb25maWdzLCBpbmRleCkKCQlsb2NhbCBmdW5jID0gQ29uZmlnc1tpbmRleF0gb3IgQ29uZmlncy5DYWxsYmFjayBvciBmdW5jdGlvbigpZW5kCgkJCgkJaWYgdHlwZShmdW5jKSA9PSAidGFibGUiIHRoZW4KCQkJcmV0dXJuICh7ZnVuY3Rpb24oVmFsdWUpIGZ1bmNbMV1bZnVuY1syXV0gPSBWYWx1ZSBlbmR9KQoJCWVuZAoJCXJldHVybiB7ZnVuY30KCWVuZAplbmQKCmxvY2FsIENvbm5lY3Rpb25zLCBDb25uZWN0aW9uID0ge30sIHJlZHpsaWIuQ29ubmVjdGlvbiBkbwoJbG9jYWwgZnVuY3Rpb24gTmV3Q29ubmVjdGlvbkxpc3QoTGlzdCkKCQlpZiB0eXBlKExpc3QpIH49ICJ0YWJsZSIgdGhlbiByZXR1cm4gZW5kCgkJCgkJZm9yIF8sQ29OYW1lIGluIGlwYWlycyhMaXN0KSBkbwoJCQlsb2NhbCBDb25uZWN0ZWRGdW5jcywgQ29ubmVjdCA9IHt9LCB7fQoJCQlDb25uZWN0aW9uW0NvTmFtZV0gPSBDb25uZWN0CgkJCUNvbm5lY3Rpb25zW0NvTmFtZV0gPSBDb25uZWN0ZWRGdW5jcwoJCQlDb25uZWN0Lk5hbWUgPSBDb05hbWUKCQkJCgkJCWZ1bmN0aW9uIENvbm5lY3Q6Q29ubmVjdChmdW5jKQoJCQkJaWYgdHlwZShmdW5jKSA9PSAiZnVuY3Rpb24iIHRoZW4KCQkJCQl0YWJsZS5pbnNlcnQoQ29ubmVjdGVkRnVuY3MsIGZ1bmMpCgkJCQkJcmV0dXJuIEZ1bmNzOkdldENvbm5lY3Rpb25GdW5jdGlvbnMoQ29ubmVjdGVkRnVuY3MsIGZ1bmMpCgkJCQllbmQKCQkJZW5kCgkJCQoJCQlmdW5jdGlvbiBDb25uZWN0Ok9uY2UoZnVuYykKCQkJCWlmIHR5cGUoZnVuYykgPT0gImZ1bmN0aW9uIiB0aGVuCgkJCQkJbG9jYWwgQ29ubmVjdGVkOwoJCQkJCQoJCQkJCWxvY2FsIF9ORnVuYztfTkZ1bmMgPSBmdW5jdGlvbiguLi4pCgkJCQkJCXRhc2suc3Bhd24oZnVuYywgLi4uKQoJCQkJCQlDb25uZWN0ZWQ6RGlzY29ubmVjdCgpCgkJCQkJZW5kCgkJCQkJCgkJCQkJQ29ubmVjdGVkID0gRnVuY3M6R2V0Q29ubmVjdGlvbkZ1bmN0aW9ucyhDb25uZWN0ZWRGdW5jcywgX05GdW5jKQoJCQkJCXJldHVybiBDb25uZWN0ZWQKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAoJCglmdW5jdGlvbiBDb25uZWN0aW9uOkZpcmVDb25uZWN0aW9uKENvTmFtZSwgLi4uKQoJCWxvY2FsIENvbm5lY3Rpb24gPSB0eXBlKENvTmFtZSkgPT0gInN0cmluZyIgYW5kIENvbm5lY3Rpb25zW0NvTmFtZV0gb3IgQ29ubmVjdGlvbnNbQ29OYW1lLk5hbWVdCgkJZm9yIF8sRnVuYyBpbiBwYWlycyhDb25uZWN0aW9uKSBkbwoJCQl0YXNrLnNwYXduKEZ1bmMsIC4uLikKCQllbmQKCWVuZAoJCglOZXdDb25uZWN0aW9uTGlzdCh7IkZsYWdzQ2hhbmdlZCIsICJUaGVtZUNoYW5nZWQiLCAiRmlsZVNhdmVkIiwgIlRoZW1lQ2hhbmdpbmciLCAiT3B0aW9uQWRkZWQifSkKZW5kCgpsb2NhbCBHZXRGbGFnLCBTZXRGbGFnLCBDaGVja0ZsYWcgZG8KCUNoZWNrRmxhZyA9IGZ1bmN0aW9uKE5hbWUpCgkJcmV0dXJuIHR5cGUoTmFtZSkgPT0gInN0cmluZyIgYW5kIEZsYWdzW05hbWVdIH49IG5pbAoJZW5kCgkKCUdldEZsYWcgPSBmdW5jdGlvbihOYW1lKQoJCXJldHVybiB0eXBlKE5hbWUpID09ICJzdHJpbmciIGFuZCBGbGFnc1tOYW1lXQoJZW5kCgkKCVNldEZsYWcgPSBmdW5jdGlvbihGbGFnLCBWYWx1ZSkKCQlpZiBGbGFnIGFuZCAoVmFsdWUgfj0gRmxhZ3NbRmxhZ10gb3IgdHlwZShWYWx1ZSkgPT0gInRhYmxlIikgdGhlbgoJCQlGbGFnc1tGbGFnXSA9IFZhbHVlCgkJCUNvbm5lY3Rpb246RmlyZUNvbm5lY3Rpb24oIkZsYWdzQ2hhbmdlZCIsIEZsYWcsIFZhbHVlKQoJCWVuZAoJZW5kCgkKCWxvY2FsIGRiCglDb25uZWN0aW9uLkZsYWdzQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKEZsYWcsIFZhbHVlKQoJCWxvY2FsIFNjcmlwdEZpbGUgPSBTZXR0aW5ncy5TY3JpcHRGaWxlCgkJaWYgbm90IGRiIGFuZCBTY3JpcHRGaWxlIGFuZCB3cml0ZWZpbGUgdGhlbgoJCQlkYj10cnVlO3Rhc2sud2FpdCgwLjEpO2RiPWZhbHNlCgkJCQoJCQlsb2NhbCBTdWNjZXNzLCBFbmNvZGVkID0gcGNhbGwoZnVuY3Rpb24oKQoJCQkJLS0gbG9jYWwgX0ZsYWdzID0ge30KCQkJCS0tIGZvciBfLEZsYWcgaW4gcGFpcnMoRmxhZ3MpIGRvIF9GbGFnc1tfXSA9IEZsYWcuVmFsdWUgZW5kCgkJCQlyZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkVuY29kZShGbGFncykKCQkJZW5kKQoJCQkKCQkJaWYgU3VjY2VzcyB0aGVuCgkJCQlsb2NhbCBTdWNjZXNzID0gcGNhbGwod3JpdGVmaWxlLCBTY3JpcHRGaWxlLCBFbmNvZGVkKQoJCQkJaWYgU3VjY2VzcyB0aGVuCgkJCQkJQ29ubmVjdGlvbjpGaXJlQ29ubmVjdGlvbigiRmlsZVNhdmVkIiwgIlNjcmlwdC1GbGFncyIsIFNjcmlwdEZpbGUsIEVuY29kZWQpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQpCmVuZAoKbG9jYWwgU2NyZWVuR3VpID0gQ3JlYXRlKCJTY3JlZW5HdWkiLCBDb3JlR3VpLCB7CglOYW1lID0gInJlZHogTGlicmFyeSBWNSIsCn0sIHsKCUNyZWF0ZSgiVUlTY2FsZSIsIHsKCQlTY2FsZSA9IFVJU2NhbGUsCgkJTmFtZSA9ICJTY2FsZSIKCX0pCn0pCgpsb2NhbCBTY3JlZW5GaW5kID0gQ29yZUd1aTpGaW5kRmlyc3RDaGlsZChTY3JlZW5HdWkuTmFtZSkKaWYgU2NyZWVuRmluZCBhbmQgU2NyZWVuRmluZCB+PSBTY3JlZW5HdWkgdGhlbgoJU2NyZWVuRmluZDpEZXN0cm95KCkKZW5kCgpsb2NhbCBmdW5jdGlvbiBHZXRTdHIodmFsKQoJaWYgdHlwZSh2YWwpID09ICJmdW5jdGlvbiIgdGhlbgoJCXJldHVybiB2YWwoKQoJZW5kCglyZXR1cm4gdmFsCmVuZAoKbG9jYWwgZnVuY3Rpb24gQ29ubmVjdFNhdmUoSW5zdGFuY2UsIGZ1bmMpCglJbnN0YW5jZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oSW5wdXQpCgkJaWYgSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIElucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KCQkJd2hpbGUgVXNlcklucHV0U2VydmljZTpJc01vdXNlQnV0dG9uUHJlc3NlZChFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xKSBkbyB0YXNrLndhaXQoKQoJCQllbmQKCQllbmQKCQlmdW5jKCkKCWVuZCkKZW5kCgpsb2NhbCBmdW5jdGlvbiBDcmVhdGVUd2VlbihDb25maWdzKQoJbG9jYWwgSW5zdGFuY2UgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuSW5zdGFuY2UKCWxvY2FsIFByb3AgPSBDb25maWdzWzJdIG9yIENvbmZpZ3MuUHJvcAoJbG9jYWwgTmV3VmFsID0gQ29uZmlnc1szXSBvciBDb25maWdzLk5ld1ZhbAoJbG9jYWwgVGltZSA9IENvbmZpZ3NbNF0gb3IgQ29uZmlncy5UaW1lIG9yIDAuNQoJbG9jYWwgVHdlZW5XYWl0ID0gQ29uZmlnc1s1XSBvciBDb25maWdzLndhaXQgb3IgZmFsc2UKCWxvY2FsIFR3ZWVuSW5mbyA9IFR3ZWVuSW5mby5uZXcoVGltZSwgRW51bS5FYXNpbmdTdHlsZS5RdWludCkKCQoJbG9jYWwgVHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKEluc3RhbmNlLCBUd2VlbkluZm8sIHtbUHJvcF0gPSBOZXdWYWx9KQoJVHdlZW46UGxheSgpCglpZiBUd2VlbldhaXQgdGhlbgoJCVR3ZWVuLkNvbXBsZXRlZDpXYWl0KCkKCWVuZAoJcmV0dXJuIFR3ZWVuCmVuZAoKbG9jYWwgZnVuY3Rpb24gTWFrZURyYWcoSW5zdGFuY2UpCgl0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCQlTZXRQcm9wcyhJbnN0YW5jZSwgewoJCQlBY3RpdmUgPSB0cnVlLAoJCQlBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQoJCX0pCgkJCgkJbG9jYWwgRHJhZ1N0YXJ0LCBTdGFydFBvcywgSW5wdXRPbgoJCQoJCWxvY2FsIGZ1bmN0aW9uIFVwZGF0ZShJbnB1dCkKCQkJbG9jYWwgZGVsdGEgPSBJbnB1dC5Qb3NpdGlvbiAtIERyYWdTdGFydAoJCQlsb2NhbCBQb3NpdGlvbiA9IFVEaW0yLm5ldyhTdGFydFBvcy5YLlNjYWxlLCBTdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlggLyBVSVNjYWxlLCBTdGFydFBvcy5ZLlNjYWxlLCBTdGFydFBvcy5ZLk9mZnNldCArIGRlbHRhLlkgLyBVSVNjYWxlKQoJCQktLSBJbnN0YW5jZS5Qb3NpdGlvbiA9IFBvc2l0aW9uCgkJCUNyZWF0ZVR3ZWVuKHtJbnN0YW5jZSwgIlBvc2l0aW9uIiwgUG9zaXRpb24sIDAuMzV9KQoJCWVuZAoJCQoJCUluc3RhbmNlLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCgkJCUlucHV0T24gPSB0cnVlCgkJZW5kKQoJCQoJCUluc3RhbmNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihJbnB1dCkKCQkJaWYgSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIElucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KCQkJCVN0YXJ0UG9zID0gSW5zdGFuY2UuUG9zaXRpb24KCQkJCURyYWdTdGFydCA9IElucHV0LlBvc2l0aW9uCgkJCQkKCQkJCXdoaWxlIFVzZXJJbnB1dFNlcnZpY2U6SXNNb3VzZUJ1dHRvblByZXNzZWQoRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSkgZG8gUnVuU2VydmljZS5IZWFydGJlYXQ6V2FpdCgpCgkJCQkJaWYgSW5wdXRPbiB0aGVuCgkJCQkJCVVwZGF0ZShJbnB1dCkKCQkJCQllbmQKCQkJCWVuZAoJCQkJSW5wdXRPbiA9IGZhbHNlCgkJCWVuZAoJCWVuZCkKCWVuZCkKCXJldHVybiBJbnN0YW5jZQplbmQKCmxvY2FsIGZ1bmN0aW9uIFZlcmlmeVRoZW1lKFRoZW1lKQoJZm9yIG5hbWUsXyBpbiBwYWlycyhyZWR6bGliLlRoZW1lcykgZG8KCQlpZiBuYW1lID09IFRoZW1lIHRoZW4KCQkJcmV0dXJuIHRydWUKCQllbmQKCWVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIFNhdmVKc29uKEZpbGVOYW1lLCBzYXZlKQoJaWYgd3JpdGVmaWxlIHRoZW4KCQlsb2NhbCBqc29uID0gSHR0cFNlcnZpY2U6SlNPTkVuY29kZShzYXZlKQoJCXdyaXRlZmlsZShGaWxlTmFtZSwganNvbikKCWVuZAplbmQKCmxvY2FsIFRoZW1lID0gcmVkemxpYi5UaGVtZXNbcmVkemxpYi5TYXZlLlRoZW1lXQoKbG9jYWwgZnVuY3Rpb24gQWRkRWxlKE5hbWUsIEZ1bmMpCglyZWR6bGliLkVsZW1lbnRzW05hbWVdID0gRnVuYwplbmQKCmxvY2FsIGZ1bmN0aW9uIE1ha2UoRWxlLCBJbnN0YW5jZSwgcHJvcHMsIC4uLikKCWxvY2FsIEVsZW1lbnQgPSByZWR6bGliLkVsZW1lbnRzW0VsZV0oSW5zdGFuY2UsIHByb3BzLCAuLi4pCglyZXR1cm4gRWxlbWVudAplbmQKCkFkZEVsZSgiQ29ybmVyIiwgZnVuY3Rpb24ocGFyZW50LCBDb3JuZXJSYWRpdXMpCglsb2NhbCBOZXcgPSBTZXRQcm9wcyhDcmVhdGUoIlVJQ29ybmVyIiwgcGFyZW50LCB7CgkJQ29ybmVyUmFkaXVzID0gQ29ybmVyUmFkaXVzIG9yIFVEaW0ubmV3KDAsIDcpCgl9KSwgcHJvcHMpCglyZXR1cm4gTmV3CmVuZCkKCkFkZEVsZSgiU3Ryb2tlIiwgZnVuY3Rpb24ocGFyZW50LCBwcm9wcywgLi4uKQoJbG9jYWwgYXJncyA9IHsuLi59Cglsb2NhbCBOZXcgPSBJbnNlcnRUaGVtZShTZXRQcm9wcyhDcmVhdGUoIlVJU3Ryb2tlIiwgcGFyZW50LCB7CgkJQ29sb3IgPSBhcmdzWzFdIG9yIFRoZW1lWyJDb2xvciBTdHJva2UiXSwKCQlUaGlja25lc3MgPSBhcmdzWzJdIG9yIDEsCgkJQXBwbHlTdHJva2VNb2RlID0gIkJvcmRlciIKCX0pLCBwcm9wcyksICJTdHJva2UiKQoJcmV0dXJuIE5ldwplbmQpCgpBZGRFbGUoIkJ1dHRvbiIsIGZ1bmN0aW9uKHBhcmVudCwgcHJvcHMsIC4uLikKCWxvY2FsIGFyZ3MgPSB7Li4ufQoJbG9jYWwgTmV3ID0gSW5zZXJ0VGhlbWUoU2V0UHJvcHMoQ3JlYXRlKCJUZXh0QnV0dG9uIiwgcGFyZW50LCB7CgkJVGV4dCA9ICIiLAoJCVNpemUgPSBVRGltMi5mcm9tU2NhbGUoMSwgMSksCgkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBIdWIgMiJdLAoJCUF1dG9CdXR0b25Db2xvciA9IGZhbHNlCgl9KSwgcHJvcHMpLCAiRnJhbWUiKQoJCglOZXcuTW91c2VFbnRlcjpDb25uZWN0KGZ1bmN0aW9uKCkKCQlOZXcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNAoJZW5kKQoJTmV3Lk1vdXNlTGVhdmU6Q29ubmVjdChmdW5jdGlvbigpCgkJTmV3LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCgllbmQpCglpZiBhcmdzWzFdIHRoZW4KCQlOZXcuQWN0aXZhdGVkOkNvbm5lY3QoYXJnc1sxXSkKCWVuZAoJcmV0dXJuIE5ldwplbmQpCgpBZGRFbGUoIkdyYWRpZW50IiwgZnVuY3Rpb24ocGFyZW50LCBwcm9wcywgLi4uKQoJbG9jYWwgYXJncyA9IHsuLi59Cglsb2NhbCBOZXcgPSBJbnNlcnRUaGVtZShTZXRQcm9wcyhDcmVhdGUoIlVJR3JhZGllbnQiLCBwYXJlbnQsIHsKCQlDb2xvciA9IFRoZW1lWyJDb2xvciBIdWIgMSJdCgl9KSwgcHJvcHMpLCAiR3JhZGllbnQiKQoJcmV0dXJuIE5ldwplbmQpCgpsb2NhbCBmdW5jdGlvbiBCdXR0b25GcmFtZShJbnN0YW5jZSwgVGl0bGUsIERlc2NyaXB0aW9uLCBIb2xkZXJTaXplKQoJbG9jYWwgVGl0bGVMID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCB7CgkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0sCgkJVGV4dENvbG9yMyA9IFRoZW1lWyJDb2xvciBUZXh0Il0sCgkJU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjApLAoJCUF1dG9tYXRpY1NpemUgPSAiWSIsCgkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC41KSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCgkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJVGV4dFRydW5jYXRlID0gIkF0RW5kIiwKCQlUZXh0U2l6ZSA9IDEwLAoJCVRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAoJCVRleHQgPSAiIiwKCQlSaWNoVGV4dCA9IHRydWUKCX0pLCAiVGV4dCIpCgkKCWxvY2FsIERlc2NMID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCB7CgkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW0sCgkJVGV4dENvbG9yMyA9IFRoZW1lWyJDb2xvciBEYXJrIFRleHQiXSwKCQlTaXplID0gVURpbTIubmV3KDEsIC0yMCksCgkJQXV0b21hdGljU2l6ZSA9ICJZIiwKCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMiwgMCwgMTUpLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCVRleHRXcmFwcGVkID0gdHJ1ZSwKCQlUZXh0U2l6ZSA9IDgsCgkJVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCgkJVGV4dCA9ICIiLAoJCVJpY2hUZXh0ID0gdHJ1ZQoJfSksICJEYXJrVGV4dCIpCgoJbG9jYWwgRnJhbWUgPSBNYWtlKCJCdXR0b24iLCBJbnN0YW5jZSwgewoJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAoJCUF1dG9tYXRpY1NpemUgPSAiWSIsCgkJTmFtZSA9ICJPcHRpb24iCgl9KU1ha2UoIkNvcm5lciIsIEZyYW1lLCBVRGltLm5ldygwLCA2KSkKCQoJTGFiZWxIb2xkZXIgPSBDcmVhdGUoIkZyYW1lIiwgRnJhbWUsIHsKCQlBdXRvbWF0aWNTaXplID0gIlkiLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCVNpemUgPSBIb2xkZXJTaXplLAoJCVBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwKSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDApCgl9LCB7CgkJQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCB7CgkJCVNvcnRPcmRlciA9ICJMYXlvdXRPcmRlciIsCgkJCVZlcnRpY2FsQWxpZ25tZW50ID0gIkNlbnRlciIsCgkJCVBhZGRpbmcgPSBVRGltLm5ldygwLCAyKQoJCX0pLAoJCUNyZWF0ZSgiVUlQYWRkaW5nIiwgewoJCQlQYWRkaW5nQm90dG9tID0gVURpbS5uZXcoMCwgNSksCgkJCVBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCA1KQoJCX0pLAoJCVRpdGxlTCwKCQlEZXNjTCwKCX0pCgkKCWxvY2FsIExhYmVsID0ge30KCWZ1bmN0aW9uIExhYmVsOlNldFRpdGxlKE5ld1RpdGxlKQoJCWlmIHR5cGUoTmV3VGl0bGUpID09ICJzdHJpbmciIGFuZCBOZXdUaXRsZTpnc3ViKCIgIiwgIiIpOmxlbigpID4gMCB0aGVuCgkJCVRpdGxlTC5UZXh0ID0gTmV3VGl0bGUKCQllbmQKCWVuZAoJZnVuY3Rpb24gTGFiZWw6U2V0RGVzYyhOZXdEZXNjKQoJCWlmIHR5cGUoTmV3RGVzYykgPT0gInN0cmluZyIgYW5kIE5ld0Rlc2M6Z3N1YigiICIsICIiKTpsZW4oKSA+IDAgdGhlbgoJCQlEZXNjTC5WaXNpYmxlID0gdHJ1ZQoJCQlEZXNjTC5UZXh0ID0gTmV3RGVzYwoJCQlMYWJlbEhvbGRlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCkKCQkJTGFiZWxIb2xkZXIuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwKQoJCWVsc2UKCQkJRGVzY0wuVmlzaWJsZSA9IGZhbHNlCgkJCURlc2NMLlRleHQgPSAiIgoJCQlMYWJlbEhvbGRlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMC41KQoJCQlMYWJlbEhvbGRlci5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSkKCQllbmQKCWVuZAoJCglMYWJlbDpTZXRUaXRsZShUaXRsZSkKCUxhYmVsOlNldERlc2MoRGVzY3JpcHRpb24pCglyZXR1cm4gRnJhbWUsIExhYmVsCmVuZAoKbG9jYWwgZnVuY3Rpb24gR2V0Q29sb3IoSW5zdGFuY2UpCglpZiBJbnN0YW5jZTpJc0EoIkZyYW1lIikgdGhlbgoJCXJldHVybiAiQmFja2dyb3VuZENvbG9yMyIKCWVsc2VpZiBJbnN0YW5jZTpJc0EoIkltYWdlTGFiZWwiKSB0aGVuCgkJcmV0dXJuICJJbWFnZUNvbG9yMyIKCWVsc2VpZiBJbnN0YW5jZTpJc0EoIlRleHRMYWJlbCIpIHRoZW4KCQlyZXR1cm4gIlRleHRDb2xvcjMiCgllbHNlaWYgSW5zdGFuY2U6SXNBKCJTY3JvbGxpbmdGcmFtZSIpIHRoZW4KCQlyZXR1cm4gIlNjcm9sbEJhckltYWdlQ29sb3IzIgoJZWxzZWlmIEluc3RhbmNlOklzQSgiVUlTdHJva2UiKSB0aGVuCgkJcmV0dXJuICJDb2xvciIKCWVuZAoJcmV0dXJuICIiCmVuZAoKLS0gLy8vLy8vLy8vLy8gLS0KZnVuY3Rpb24gcmVkemxpYjpHZXRJY29uKGluZGV4KQoJaWYgdHlwZShpbmRleCkgfj0gInN0cmluZyIgb3IgaW5kZXg6ZmluZCgicmJ4YXNzZXRpZDovLyIpIG9yICNpbmRleCA9PSAwIHRoZW4KCQlyZXR1cm4gaW5kZXgKCWVuZAoJCglsb2NhbCBmaXJzdE1hdGNoID0gbmlsCglpbmRleCA9IHN0cmluZy5sb3dlcihpbmRleCk6Z3N1YigibHVjaWRlIiwgIiIpOmdzdWIoIi0iLCAiIikKCQoJZm9yIE5hbWUsIEljb24gaW4gc2VsZi5JY29ucyBkbwoJCU5hbWUgPSBOYW1lOmdzdWIoImx1Y2lkZSIsICIiKTpnc3ViKCItIiwgIiIpCgkJaWYgTmFtZSA9PSBpbmRleCB0aGVuCgkJCXJldHVybiBJY29uCgkJZWxzZWlmIG5vdCBmaXJzdE1hdGNoIGFuZCBOYW1lOmZpbmQoaW5kZXgsIDEsIHRydWUpIHRoZW4KCQkJZmlyc3RNYXRjaCA9IEljb24KCQllbmQKCWVuZAoJCglyZXR1cm4gZmlyc3RNYXRjaCBvciBpbmRleAplbmQKCmZ1bmN0aW9uIHJlZHpsaWI6U2V0VGhlbWUoTmV3VGhlbWUpCglpZiBub3QgVmVyaWZ5VGhlbWUoTmV3VGhlbWUpIHRoZW4gcmV0dXJuIGVuZAoJCglyZWR6bGliLlNhdmUuVGhlbWUgPSBOZXdUaGVtZQoJU2F2ZUpzb24oInJlZHogbGlicmFyeSBWNS5qc29uIiwgcmVkemxpYi5TYXZlKQoJVGhlbWUgPSByZWR6bGliLlRoZW1lc1tOZXdUaGVtZV0KCQoJQ29tbmVjdGlvbjpGaXJlQ29ubmVjdGlvbigiVGhlbWVDaGFuZ2VkIiwgTmV3VGhlbWUpCgl0YWJsZS5mb3JlYWNoKHJlZHpsaWIuSW5zdGFuY2VzLCBmdW5jdGlvbihfLFZhbCkKCQlpZiBWYWwuVHlwZSA9PSAiR3JhZGllbnQiIHRoZW4KCQkJVmFsLkluc3RhbmNlLkNvbG9yID0gVGhlbWVbIkNvbG9yIEh1YiAxIl0KCQllbHNlaWYgVmFsLlR5cGUgPT0gIkZyYW1lIiB0aGVuCgkJCVZhbC5JbnN0YW5jZS5CYWNrZ3JvdW5kQ29sb3IzID0gVGhlbWVbIkNvbG9yIEh1YiAyIl0KCQllbHNlaWYgVmFsLlR5cGUgPT0gIlN0cm9rZSIgdGhlbgoJCQlWYWwuSW5zdGFuY2VbR2V0Q29sb3IoVmFsLkluc3RhbmNlKV0gPSBUaGVtZVsiQ29sb3IgU3Ryb2tlIl0KCQllbHNlaWYgVmFsLlR5cGUgPT0gIlRoZW1lIiB0aGVuCgkJCVZhbC5JbnN0YW5jZVtHZXRDb2xvcihWYWwuSW5zdGFuY2UpXSA9IFRoZW1lWyJDb2xvciBUaGVtZSJdCgkJZWxzZWlmIFZhbC5UeXBlID09ICJUZXh0IiB0aGVuCgkJCVZhbC5JbnN0YW5jZVtHZXRDb2xvcihWYWwuSW5zdGFuY2UpXSA9IFRoZW1lWyJDb2xvciBUZXh0Il0KCQllbHNlaWYgVmFsLlR5cGUgPT0gIkRhcmtUZXh0IiB0aGVuCgkJCVZhbC5JbnN0YW5jZVtHZXRDb2xvcihWYWwuSW5zdGFuY2UpXSA9IFRoZW1lWyJDb2xvciBEYXJrIFRleHQiXQoJCWVsc2VpZiBWYWwuVHlwZSA9PSAiU2Nyb2xsQmFyIiB0aGVuCgkJCVZhbC5JbnN0YW5jZVtHZXRDb2xvcihWYWwuSW5zdGFuY2UpXSA9IFRoZW1lWyJDb2xvciBUaGVtZSJdCgkJZW5kCgllbmQpCmVuZAoKZnVuY3Rpb24gcmVkemxpYjpTZXRTY2FsZShOZXdTY2FsZSkKCU5ld1NjYWxlID0gVmlld3BvcnRTaXplLlkgLyBtYXRoLmNsYW1wKE5ld1NjYWxlLCAzMDAsIDIwMDApCglVSVNjYWxlLCBTY3JlZW5HdWkuU2NhbGUuU2NhbGUgPSBOZXdTY2FsZSwgTmV3U2NhbGUKZW5kCgpmdW5jdGlvbiByZWR6bGliOk1ha2VXaW5kb3coQ29uZmlncykKCWxvY2FsIFdUaXRsZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yIENvbmZpZ3MuVGl0bGUgb3IgInJlZHogTGlicmFyeSBWNSIKCWxvY2FsIFdNaW5pVGV4dCA9IENvbmZpZ3NbMl0gb3IgQ29uZmlncy5TdWJUaXRsZSBvciAiYnkgOiByZWR6OTk5OSIKCQoJU2V0dGluZ3MuU2NyaXB0RmlsZSA9IENvbmZpZ3NbM10gb3IgQ29uZmlncy5TYXZlRm9sZGVyIG9yIGZhbHNlCgkKCWxvY2FsIGZ1bmN0aW9uIExvYWRGaWxlKCkKCQlsb2NhbCBGaWxlID0gU2V0dGluZ3MuU2NyaXB0RmlsZQoJCWlmIHR5cGUoRmlsZSkgfj0gInN0cmluZyIgdGhlbiByZXR1cm4gZW5kCgkJaWYgbm90IHJlYWRmaWxlIG9yIG5vdCBpc2ZpbGUgdGhlbiByZXR1cm4gZW5kCgkJbG9jYWwgcywgciA9IHBjYWxsKGlzZmlsZSwgRmlsZSkKCQkKCQlpZiBzIGFuZCByIHRoZW4KCQkJbG9jYWwgcywgX0ZsYWdzID0gcGNhbGwocmVhZGZpbGUsIEZpbGUpCgkJCQoJCQlpZiBzIGFuZCB0eXBlKF9GbGFncykgPT0gInN0cmluZyIgdGhlbgoJCQkJbG9jYWwgcyxyID0gcGNhbGwoZnVuY3Rpb24oKSByZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShfRmxhZ3MpIGVuZCkKCQkJCUZsYWdzID0gcyBhbmQgciBvciB7fQoJCQllbmQKCQllbmQKCWVuZDtMb2FkRmlsZSgpCgkKCWxvY2FsIFVJU2l6ZVgsIFVJU2l6ZVkgPSB1bnBhY2socmVkemxpYi5TYXZlLlVJU2l6ZSkKCWxvY2FsIE1haW5GcmFtZSA9IEluc2VydFRoZW1lKENyZWF0ZSgiSW1hZ2VCdXR0b24iLCBTY3JlZW5HdWksIHsKCQlTaXplID0gVURpbTIuZnJvbU9mZnNldChVSVNpemVYLCBVSVNpemVZKSwKCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC1VSVNpemVYLzIsIDAuNSwgLVVJU2l6ZVkvMiksCgkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMDMsCgkJTmFtZSA9ICJIdWIiCgl9KSwgIk1haW4iKQoJTWFrZSgiR3JhZGllbnQiLCBNYWluRnJhbWUsIHsKCQlSb3RhdGlvbiA9IDQ1Cgl9KU1ha2VEcmFnKE1haW5GcmFtZSkKCQoJbG9jYWwgTWFpbkNvcm5lciA9IE1ha2UoIkNvcm5lciIsIE1haW5GcmFtZSkKCQoJbG9jYWwgQ29tcG9uZW50cyA9IENyZWF0ZSgiRm9sZGVyIiwgTWFpbkZyYW1lLCB7CgkJTmFtZSA9ICJDb21wb25lbnRzIgoJfSkKCQoJbG9jYWwgRHJvcGRvd25Ib2xkZXIgPSBDcmVhdGUoIkZvbGRlciIsIFNjcmVlbkd1aSwgewoJCU5hbWUgPSAiRHJvcGRvd24iCgl9KQoJCglsb2NhbCBUb3BCYXIgPSBDcmVhdGUoIkZyYW1lIiwgQ29tcG9uZW50cywgewoJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjgpLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCU5hbWUgPSAiVG9wIEJhciIKCX0pCgkKCWxvY2FsIFRpdGxlID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCBUb3BCYXIsIHsKCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNSwgMC41KSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCgkJQXV0b21hdGljU2l6ZSA9ICJYWSIsCgkJVGV4dCA9IFdUaXRsZSwKCQlUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKCQlUZXh0U2l6ZSA9IDEyLAoJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGV4dCJdLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCUZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtLAoJCU5hbWUgPSAiVGl0bGUiCgl9LCB7CgkJSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCB7CgkJCVNpemUgPSBVRGltMi5mcm9tU2NhbGUoMCwgMSksCgkJCUF1dG9tYXRpY1NpemUgPSAiWCIsCgkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMSksCgkJCVBvc2l0aW9uID0gVURpbTIubmV3KDEsIDUsIDAuOSksCgkJCVRleHQgPSBXTWluaVRleHQsCgkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgRGFyayBUZXh0Il0sCgkJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCQlUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKCQkJVGV4dFlBbGlnbm1lbnQgPSAiQm90dG9tIiwKCQkJVGV4dFNpemUgPSA4LAoJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbSwKCQkJTmFtZSA9ICJTdWJUaXRsZSIKCQl9KSwgIkRhcmtUZXh0IikKCX0pLCAiVGV4dCIpCgkKCWxvY2FsIE1haW5TY3JvbGwgPSBJbnNlcnRUaGVtZShDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgQ29tcG9uZW50cywgewoJCVNpemUgPSBVRGltMi5uZXcoMCwgcmVkemxpYi5TYXZlLlRhYlNpemUsIDEsIC1Ub3BCYXIuU2l6ZS5ZLk9mZnNldCksCgkJU2Nyb2xsQmFySW1hZ2VDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGhlbWUiXSwKCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAwKSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDEpLAoJCVNjcm9sbEJhclRoaWNrbmVzcyA9IDEuNSwKCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQlTY3JvbGxCYXJJbWFnZVRyYW5zcGFyZW5jeSA9IDAuMiwKCQlDYW52YXNTaXplID0gVURpbTIubmV3KCksCgkJQXV0b21hdGljQ2FudmFzU2l6ZSA9ICJZIiwKCQlTY3JvbGxpbmdEaXJlY3Rpb24gPSAiWSIsCgkJQm9yZGVyU2l6ZVBpeGVsID0gMCwKCQlOYW1lID0gIlRhYiBTY3JvbGwiCgl9LCB7CgkJQ3JlYXRlKCJVSVBhZGRpbmciLCB7CgkJCVBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMTApLAoJCQlQYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLCAxMCksCgkJCVBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCAxMCksCgkJCVBhZGRpbmdCb3R0b20gPSBVRGltLm5ldygwLCAxMCkKCQl9KSwgQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCB7CgkJCVBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQoJCX0pCgl9KSwgIlNjcm9sbEJhciIpCgkKCWxvY2FsIENvbnRhaW5lcnMgPSBDcmVhdGUoIkZyYW1lIiwgQ29tcG9uZW50cywgewoJCVNpemUgPSBVRGltMi5uZXcoMSwgLU1haW5TY3JvbGwuU2l6ZS5YLk9mZnNldCwgMSwgLVRvcEJhci5TaXplLlkuT2Zmc2V0KSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDEpLAoJCVBvc2l0aW9uID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCUNsaXBzRGVzY2VuZGFudHMgPSB0cnVlLAoJCU5hbWUgPSAiQ29udGFpbmVycyIKCX0pCgkKCWxvY2FsIENvbnRyb2xTaXplMSwgQ29udHJvbFNpemUyID0gTWFrZURyYWcoQ3JlYXRlKCJJbWFnZUJ1dHRvbiIsIE1haW5GcmFtZSwgewoJCVNpemUgPSBVRGltMi5uZXcoMCwgMzUsIDAsIDM1KSwKCQlQb3NpdGlvbiA9IE1haW5GcmFtZS5TaXplLAoJCUFjdGl2ZSA9IHRydWUsCgkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjgsIDAuOCksCgkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJTmFtZSA9ICJDb250cm9sIEh1YiBTaXplIgoJfSkpLCBNYWtlRHJhZyhDcmVhdGUoIkltYWdlQnV0dG9uIiwgTWFpbkZyYW1lLCB7CgkJU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMSwgLTMwKSwKCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBNYWluU2Nyb2xsLlNpemUuWC5PZmZzZXQsIDEsIDApLAoJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAxKSwKCQlBY3RpdmUgPSB0cnVlLAoJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCU5hbWUgPSAiQ29udHJvbCBUYWIgU2l6ZSIKCX0pKQoJCglsb2NhbCBmdW5jdGlvbiBDb250cm9sU2l6ZSgpCgkJbG9jYWwgUG9zMSwgUG9zMiA9IENvbnRyb2xTaXplMS5Qb3NpdGlvbiwgQ29udHJvbFNpemUyLlBvc2l0aW9uCgkJQ29udHJvbFNpemUxLlBvc2l0aW9uID0gVURpbTIuZnJvbU9mZnNldChtYXRoLmNsYW1wKFBvczEuWC5PZmZzZXQsIDQzMCwgMTAwMCksIG1hdGguY2xhbXAoUG9zMS5ZLk9mZnNldCwgMjAwLCA1MDApKQoJCUNvbnRyb2xTaXplMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBtYXRoLmNsYW1wKFBvczIuWC5PZmZzZXQsIDEzNSwgMjUwKSwgMSwgMCkKCQkKCQlNYWluU2Nyb2xsLlNpemUgPSBVRGltMi5uZXcoMCwgQ29udHJvbFNpemUyLlBvc2l0aW9uLlguT2Zmc2V0LCAxLCAtVG9wQmFyLlNpemUuWS5PZmZzZXQpCgkJQ29udGFpbmVycy5TaXplID0gVURpbTIubmV3KDEsIC1NYWluU2Nyb2xsLlNpemUuWC5PZmZzZXQsIDEsIC1Ub3BCYXIuU2l6ZS5ZLk9mZnNldCkKCQlNYWluRnJhbWUuU2l6ZSA9IENvbnRyb2xTaXplMS5Qb3NpdGlvbgoJZW5kCgkKCUNvbnRyb2xTaXplMTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlBvc2l0aW9uIik6Q29ubmVjdChDb250cm9sU2l6ZSkKCUNvbnRyb2xTaXplMjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlBvc2l0aW9uIik6Q29ubmVjdChDb250cm9sU2l6ZSkKCQoJQ29ubmVjdFNhdmUoQ29udHJvbFNpemUxLCBmdW5jdGlvbigpCgkJaWYgbm90IE1pbmltaXplZCB0aGVuCgkJCXJlZHpsaWIuU2F2ZS5VSVNpemUgPSB7TWFpbkZyYW1lLlNpemUuWC5PZmZzZXQsIE1haW5GcmFtZS5TaXplLlkuT2Zmc2V0fQoJCQlTYXZlSnNvbigicmVkeiBsaWJyYXJ5IFY1Lmpzb24iLCByZWR6bGliLlNhdmUpCgkJZW5kCgllbmQpCgkKCUNvbm5lY3RTYXZlKENvbnRyb2xTaXplMiwgZnVuY3Rpb24oKQoJCXJlZHpsaWIuU2F2ZS5UYWJTaXplID0gTWFpblNjcm9sbC5TaXplLlguT2Zmc2V0CgkJU2F2ZUpzb24oInJlZHogbGlicmFyeSBWNS5qc29uIiwgcmVkemxpYi5TYXZlKQoJZW5kKQoJCglsb2NhbCBCdXR0b25zRm9sZGVyID0gQ3JlYXRlKCJGb2xkZXIiLCBUb3BCYXIsIHsKCQlOYW1lID0gIkJ1dHRvbnMiCgl9KQoJCglsb2NhbCBDbG9zZUJ1dHRvbiA9IENyZWF0ZSgiSW1hZ2VCdXR0b24iLCB7CgkJU2l6ZSA9IFVEaW0yLm5ldygwLCAxNCwgMCwgMTQpLAoJCVBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0xMCwgMC41KSwKCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSksCgkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEwNzQ3Mzg0Mzk0IiwKCQlBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZSwKCQlOYW1lID0gIkNsb3NlIgoJfSkKCQoJbG9jYWwgTWluaW1pemVCdXR0b24gPSBTZXRQcm9wcyhDbG9zZUJ1dHRvbjpDbG9uZSgpLCB7CgkJUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTM1LCAwLjUpLAoJCUltYWdlID0gInJieGFzc2V0aWQ6Ly8xMDczNDg5NjIwNiIsCgkJTmFtZSA9ICJNaW5pbWl6ZSIKCX0pCgkKCVNldENoaWxkcmVuKEJ1dHRvbnNGb2xkZXIsIHsKCQlDbG9zZUJ1dHRvbiwKCQlNaW5pbWl6ZUJ1dHRvbgoJfSkKCQoJbG9jYWwgTWluaW1pemVkLCBTYXZlU2l6ZSwgV2FpdENsaWNrCglsb2NhbCBXaW5kb3csIEZpcnN0VGFiID0ge30sIGZhbHNlCglmdW5jdGlvbiBXaW5kb3c6Q2xvc2VCdG4oKQoJCWxvY2FsIERpYWxvZyA9IFdpbmRvdzpEaWFsb2coewoJCQlUaXRsZSA9ICJDbG9zZSIsCgkJCVRleHQgPSAiWW91IFdhbnQgQ2xvc2UgVWk/IiwKCQkJT3B0aW9ucyA9IHsKCQkJCXsiQ29uZmlybSIsIGZ1bmN0aW9uKCkKCQkJCQlTY3JlZW5HdWk6RGVzdHJveSgpCgkJCQllbmR9LAoJCQkJeyJDYW5jZWwifQoJCQl9CgkJfSkKCWVuZAoJZnVuY3Rpb24gV2luZG93Ok1pbmltaXplQnRuKCkKCQlpZiBXYWl0Q2xpY2sgdGhlbiByZXR1cm4gZW5kCgkJV2FpdENsaWNrID0gdHJ1ZQoJCQoJCWlmIE1pbmltaXplZCB0aGVuCgkJCU1pbmltaXplQnV0dG9uLkltYWdlID0gInJieGFzc2V0aWQ6Ly8xMDczNDg5NjIwNiIKCQkJQ3JlYXRlVHdlZW4oe01haW5GcmFtZSwgIlNpemUiLCBTYXZlU2l6ZSwgMC4yNSwgdHJ1ZX0pCgkJCUNvbnRyb2xTaXplMS5WaXNpYmxlID0gdHJ1ZQoJCQlDb250cm9sU2l6ZTIuVmlzaWJsZSA9IHRydWUKCQkJTWluaW1pemVkID0gZmFsc2UKCQllbHNlCgkJCU1pbmltaXplQnV0dG9uLkltYWdlID0gInJieGFzc2V0aWQ6Ly8xMDczNDkyNDUzMiIKCQkJU2F2ZVNpemUgPSBNYWluRnJhbWUuU2l6ZQoJCQlDb250cm9sU2l6ZTEuVmlzaWJsZSA9IGZhbHNlCgkJCUNvbnRyb2xTaXplMi5WaXNpYmxlID0gZmFsc2UKCQkJQ3JlYXRlVHdlZW4oe01haW5GcmFtZSwgIlNpemUiLCBVRGltMi5mcm9tT2Zmc2V0KE1haW5GcmFtZS5TaXplLlguT2Zmc2V0LCAyOCksIDAuMjUsIHRydWV9KQoJCQlNaW5pbWl6ZWQgPSB0cnVlCgkJZW5kCgkJCgkJV2FpdENsaWNrID0gZmFsc2UKCWVuZAoJZnVuY3Rpb24gV2luZG93Ok1pbmltaXplKCkKCQlNYWluRnJhbWUuVmlzaWJsZSA9IG5vdCBNYWluRnJhbWUuVmlzaWJsZQoJZW5kCglmdW5jdGlvbiBXaW5kb3c6QWRkTWluaW1pemVCdXR0b24oQ29uZmlncykKCQlsb2NhbCBCdXR0b24gPSBNYWtlRHJhZyhDcmVhdGUoIkltYWdlQnV0dG9uIiwgU2NyZWVuR3VpLCB7CgkJCVNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KDM1LCAzNSksCgkJCVBvc2l0aW9uID0gVURpbTIuZnJvbVNjYWxlKDAuMTUsIDAuMTUpLAoJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBIdWIgMiJdLAoJCQlBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQoJCX0pKQoJCQoJCWxvY2FsIFN0cm9rZSwgQ29ybmVyCgkJaWYgQ29uZmlncy5Db3JuZXIgdGhlbgoJCQlDb3JuZXIgPSBNYWtlKCJDb3JuZXIiLCBCdXR0b24pCgkJCVNldFByb3BzKENvcm5lciwgQ29uZmlncy5Db3JuZXIpCgkJZW5kCgkJaWYgQ29uZmlncy5TdHJva2UgdGhlbgoJCQlTdHJva2UgPSBNYWtlKCJTdHJva2UiLCBCdXR0b24pCgkJCVNldFByb3BzKFN0cm9rZSwgQ29uZmlncy5Db3JuZXIpCgkJZW5kCgkJCgkJU2V0UHJvcHMoQnV0dG9uLCBDb25maWdzLkJ1dHRvbikKCQlCdXR0b24uQWN0aXZhdGVkOkNvbm5lY3QoV2luZG93Lk1pbmltaXplKQoJCQoJCXJldHVybiB7CgkJCVN0cm9rZSA9IFN0cm9rZSwKCQkJQ29ybmVyID0gQ29ybmVyLAoJCQlCdXR0b24gPSBCdXR0b24KCQl9CgllbmQKCWZ1bmN0aW9uIFdpbmRvdzpTZXQoVmFsMSwgVmFsMikKCQlpZiB0eXBlKFZhbDEpID09ICJzdHJpbmciIGFuZCB0eXBlKFZhbDIpID09ICJzdHJpbmciIHRoZW4KCQkJVGl0bGUuVGV4dCA9IFZhbDEKCQkJVGl0bGUuU3ViVGl0bGUuVGV4dCA9IFZhbDIKCQllbHNlaWYgdHlwZShWYWwxKSA9PSAic3RyaW5nIiB0aGVuCgkJCVRpdGxlLlRleHQgPSBWYWwxCgkJZW5kCgllbmQKCWZ1bmN0aW9uIFdpbmRvdzpEaWFsb2coQ29uZmlncykKCQlpZiBNYWluRnJhbWU6RmluZEZpcnN0Q2hpbGQoIkRpYWxvZyIpIHRoZW4gcmV0dXJuIGVuZAoJCWlmIE1pbmltaXplZCB0aGVuCgkJCVdpbmRvdzpNaW5pbWl6ZUJ0bigpCgkJZW5kCgkJCgkJbG9jYWwgRFRpdGxlID0gQ29uZmlnc1sxXSBvciBDb25maWdzLlRpdGxlIG9yICJEaWFsb2ciCgkJbG9jYWwgRFRleHQgPSBDb25maWdzWzJdIG9yIENvbmZpZ3MuVGV4dCBvciAiVGhpcyBpcyBhIERpYWxvZyIKCQlsb2NhbCBET3B0aW9ucyA9IENvbmZpZ3NbM10gb3IgQ29uZmlncy5PcHRpb25zIG9yIHt9CgkJCgkJbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgewoJCQlBY3RpdmUgPSB0cnVlLAoJCQlTaXplID0gVURpbTIuZnJvbU9mZnNldCgyNTAgKiAxLjA4LCAxNTAgKiAxLjA4KSwKCQkJUG9zaXRpb24gPSBVRGltMi5mcm9tU2NhbGUoMC41LCAwLjUpLAoJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQoJCX0sIHsKCQkJSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCB7CgkJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCgkJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwKCQkJCVRleHQgPSBEVGl0bGUsCgkJCQlUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKCQkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGV4dCJdLAoJCQkJVGV4dFNpemUgPSAxNSwKCQkJCVBvc2l0aW9uID0gVURpbTIuZnJvbU9mZnNldCgxNSwgNSksCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCQl9KSwgIlRleHQiKSwKCQkJSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCB7CgkJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bSwKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgLTI1KSwKCQkJCUF1dG9tYXRpY1NpemUgPSAiWSIsCgkJCQlUZXh0ID0gRFRleHQsCgkJCQlUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKCQkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgRGFyayBUZXh0Il0sCgkJCQlUZXh0U2l6ZSA9IDEyLAoJCQkJUG9zaXRpb24gPSBVRGltMi5mcm9tT2Zmc2V0KDE1LCAyNSksCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJCVRleHRXcmFwcGVkID0gdHJ1ZQoJCQl9KSwgIkRhcmtUZXh0IikKCQl9KU1ha2UoIkdyYWRpZW50IiwgRnJhbWUsIHtSb3RhdGlvbiA9IDI3MH0pTWFrZSgiQ29ybmVyIiwgRnJhbWUpCgkJCgkJbG9jYWwgQnV0dG9uc0hvbGRlciA9IENyZWF0ZSgiRnJhbWUiLCBGcmFtZSwgewoJCQlTaXplID0gVURpbTIuZnJvbVNjYWxlKDEsIDAuMzUpLAoJCQlQb3NpdGlvbiA9IFVEaW0yLmZyb21TY2FsZSgwLCAxKSwKCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAxKSwKCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBIdWIgMiJdLAoJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCX0sIHsKCQkJQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCB7CgkJCQlQYWRkaW5nID0gVURpbS5uZXcoMCwgMTApLAoJCQkJVmVydGljYWxBbGlnbm1lbnQgPSAiQ2VudGVyIiwKCQkJCUZpbGxEaXJlY3Rpb24gPSAiSG9yaXpvbnRhbCIsCgkJCQlIb3Jpem9udGFsQWxpZ25tZW50ID0gIkNlbnRlciIKCQkJfSkKCQl9KQoJCQoJCWxvY2FsIFNjcmVlbiA9IEluc2VydFRoZW1lKENyZWF0ZSgiRnJhbWUiLCBNYWluRnJhbWUsIHsKCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNiwKCQkJQWN0aXZlID0gdHJ1ZSwKCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBIdWIgMiJdLAoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAoJCQlCYWNrZ3JvdW5kQ29sb3IzID0gVGhlbWVbIkNvbG9yIFN0cm9rZSJdLAoJCQlOYW1lID0gIkRpYWxvZyIKCQl9KSwgIlN0cm9rZSIpCgkJCgkJTWFpbkNvcm5lcjpDbG9uZSgpLlBhcmVudCA9IFNjcmVlbgoJCUZyYW1lLlBhcmVudCA9IFNjcmVlbgoJCUNyZWF0ZVR3ZWVuKHtGcmFtZSwgIlNpemUiLCBVRGltMi5mcm9tT2Zmc2V0KDI1MCwgMTUwKSwgMC4yfSkKCQlDcmVhdGVUd2Vlbih7RnJhbWUsICJUcmFuc3BhcmVuY3kiLCAwLCAwLjE1fSkKCQlDcmVhdGVUd2Vlbih7U2NyZWVuLCAiVHJhbnNwYXJlbmN5IiwgMC4zLCAwLjE1fSkKCQkKCQlsb2NhbCBCdXR0b25Db3VudCwgRGlhbG9nID0gMSwge30KCQlmdW5jdGlvbiBEaWFsb2c6QnV0dG9uKENvbmZpZ3MpCgkJCWxvY2FsIE5hbWUgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuTmFtZSBvciBDb25maWdzLlRpdGxlIG9yICIiCgkJCWxvY2FsIENhbGxiYWNrID0gQ29uZmlnc1syXSBvciBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCllbmQKCQkJCgkJCUJ1dHRvbkNvdW50ID0gQnV0dG9uQ291bnQgKyAxCgkJCWxvY2FsIEJ1dHRvbiA9IE1ha2UoIkJ1dHRvbiIsIEJ1dHRvbnNIb2xkZXIpCgkJCU1ha2UoIkNvcm5lciIsIEJ1dHRvbikKCQkJU2V0UHJvcHMoQnV0dG9uLCB7CgkJCQlUZXh0ID0gTmFtZSwKCQkJCUZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZCwKCQkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGV4dCJdLAoJCQkJVGV4dFNpemUgPSAxMgoJCQl9KQoJCQkKCQkJZm9yIF8sQnV0dG9uIGluIHBhaXJzKEJ1dHRvbnNIb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCWlmIEJ1dHRvbjpJc0EoIlRleHRCdXR0b24iKSB0aGVuCgkJCQkJQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMSAvIEJ1dHRvbkNvdW50LCAtKCgoQnV0dG9uQ291bnQgLSAxKSAqIDIwKSAvIEJ1dHRvbkNvdW50KSwgMCwgMzIpIC0tIEZsdWVudCBMaWJyYXJ5IDopCgkJCQllbmQKCQkJZW5kCgkJCUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChEaWFsb2cuQ2xvc2UpCgkJCUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChDYWxsYmFjaykKCQllbmQKCQlmdW5jdGlvbiBEaWFsb2c6Q2xvc2UoKQoJCQlDcmVhdGVUd2Vlbih7RnJhbWUsICJTaXplIiwgVURpbTIuZnJvbU9mZnNldCgyNTAgKiAxLjA4LCAxNTAgKiAxLjA4KSwgMC4yfSkKCQkJQ3JlYXRlVHdlZW4oe1NjcmVlbiwgIlRyYW5zcGFyZW5jeSIsIDEsIDAuMTV9KQoJCQlDcmVhdGVUd2Vlbih7RnJhbWUsICJUcmFuc3BhcmVuY3kiLCAxLCAwLjE1LCB0cnVlfSkKCQkJU2NyZWVuOkRlc3Ryb3koKQoJCWVuZAoJCXRhYmxlLmZvcmVhY2goRE9wdGlvbnMsIGZ1bmN0aW9uKF8sQnV0dG9uKQoJCQlEaWFsb2c6QnV0dG9uKEJ1dHRvbikKCQllbmQpCgkJcmV0dXJuIERpYWxvZwoJZW5kCglmdW5jdGlvbiBXaW5kb3c6U2VsZWN0VGFiKFRhYlNlbGVjdCkKCQlpZiB0eXBlKFRhYlNlbGVjdCkgPT0gIm51bWJlciIgdGhlbgoJCQlyZWR6bGliLlRhYnNbVGFiU2VsZWN0XS5mdW5jOkVuYWJsZSgpCgkJZWxzZQoJCQlmb3IgXyxUYWIgaW4gcGFpcnMocmVkemxpYi5UYWJzKSBkbwoJCQkJaWYgVGFiLkNvbnQgPT0gVGFiU2VsZWN0LkNvbnQgdGhlbgoJCQkJCVRhYi5mdW5jOkVuYWJsZSgpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKCQoJbG9jYWwgQ29udGFpbmVyTGlzdCA9IHt9CglmdW5jdGlvbiBXaW5kb3c6TWFrZVRhYihwYXN0ZSwgQ29uZmlncykKCQlpZiB0eXBlKHBhc3RlKSA9PSAidGFibGUiIHRoZW4gQ29uZmlncyA9IHBhc3RlIGVuZAoJCWxvY2FsIFROYW1lID0gQ29uZmlnc1sxXSBvciBDb25maWdzLlRpdGxlIG9yICJUYWIhIgoJCWxvY2FsIFRJY29uID0gQ29uZmlnc1syXSBvciBDb25maWdzLkljb24gb3IgIiIKCQkKCQlUSWNvbiA9IHJlZHpsaWI6R2V0SWNvbihUSWNvbikKCQlpZiBub3QgVEljb246ZmluZCgicmJ4YXNzZXRpZDovLyIpIG9yIFRJY29uOmdzdWIoInJieGFzc2V0aWQ6Ly8iLCAiIik6bGVuKCkgPCA2IHRoZW4KCQkJVEljb24gPSBmYWxzZQoJCWVuZAoJCQoJCWxvY2FsIFRhYlNlbGVjdCA9IE1ha2UoIkJ1dHRvbiIsIE1haW5TY3JvbGwsIHsKCQkJU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNCkKCQl9KU1ha2UoIkNvcm5lciIsIFRhYlNlbGVjdCkKCQkKCQlsb2NhbCBMYWJlbFRpdGxlID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCBUYWJTZWxlY3QsIHsKCQkJU2l6ZSA9IFVEaW0yLm5ldygxLCBUSWNvbiBhbmQgLTI1IG9yIC0xNSwgMSksCgkJCVBvc2l0aW9uID0gVURpbTIuZnJvbU9mZnNldChUSWNvbiBhbmQgMjUgb3IgMTUpLAoJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0sCgkJCVRleHQgPSBUTmFtZSwKCQkJVGV4dENvbG9yMyA9IFRoZW1lWyJDb2xvciBUZXh0Il0sCgkJCVRleHRTaXplID0gMTAsCgkJCVRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0LAoJCQlUZXh0VHJhbnNwYXJlbmN5ID0gKEZpcnN0VGFiIGFuZCAwLjMpIG9yIDAsCgkJCVRleHRUcnVuY2F0ZSA9ICJBdEVuZCIKCQl9KSwgIlRleHQiKQoJCQoJCWxvY2FsIExhYmVsSWNvbiA9IEluc2VydFRoZW1lKENyZWF0ZSgiSW1hZ2VMYWJlbCIsIFRhYlNlbGVjdCwgewoJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA4LCAwLjUpLAoJCQlTaXplID0gVURpbTIubmV3KDAsIDEzLCAwLCAxMyksCgkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMC41KSwKCQkJSW1hZ2UgPSBUSWNvbiBvciAiIiwKCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCUltYWdlVHJhbnNwYXJlbmN5ID0gKEZpcnN0VGFiIGFuZCAwLjMpIG9yIDAKCQl9KSwgIlRleHQiKQoJCQoJCWxvY2FsIFNlbGVjdGVkID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJGcmFtZSIsIFRhYlNlbGVjdCwgewoJCQlTaXplID0gRmlyc3RUYWIgYW5kIFVEaW0yLm5ldygwLCA0LCAwLCA0KSBvciBVRGltMi5uZXcoMCwgNCwgMCwgMTMpLAoJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxLCAwLjUpLAoJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCgkJCUJhY2tncm91bmRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGhlbWUiXSwKCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IEZpcnN0VGFiIGFuZCAxIG9yIDAKCQl9KSwgIlRoZW1lIilNYWtlKCJDb3JuZXIiLCBTZWxlY3RlZCwgVURpbS5uZXcoMC41LCAwKSkKCQkKCQlsb2NhbCBDb250YWluZXIgPSBJbnNlcnRUaGVtZShDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgewoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAoJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxKSwKCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAxKSwKCQkJU2Nyb2xsQmFyVGhpY2tuZXNzID0gMS41LAoJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJU2Nyb2xsQmFySW1hZ2VUcmFuc3BhcmVuY3kgPSAwLjIsCgkJCVNjcm9sbEJhckltYWdlQ29sb3IzID0gVGhlbWVbIkNvbG9yIFRoZW1lIl0sCgkJCUF1dG9tYXRpY0NhbnZhc1NpemUgPSAiWSIsCgkJCVNjcm9sbGluZ0RpcmVjdGlvbiA9ICJZIiwKCQkJQm9yZGVyU2l6ZVBpeGVsID0gMCwKCQkJQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygpLAoJCQlOYW1lID0gKCJDb250YWluZXIgJWkgWyAlcyBdIik6Zm9ybWF0KCNDb250YWluZXJMaXN0ICsgMSwgVE5hbWUpCgkJfSwgewoJCQlDcmVhdGUoIlVJUGFkZGluZyIsIHsKCQkJCVBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMTApLAoJCQkJUGFkZGluZ1JpZ2h0ID0gVURpbS5uZXcoMCwgMTApLAoJCQkJUGFkZGluZ1RvcCA9IFVEaW0ubmV3KDAsIDEwKSwKCQkJCVBhZGRpbmdCb3R0b20gPSBVRGltLm5ldygwLCAxMCkKCQkJfSksIENyZWF0ZSgiVUlMaXN0TGF5b3V0IiwgewoJCQkJUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCgkJCX0pCgkJfSksICJTY3JvbGxCYXIiKQoJCQoJCXRhYmxlLmluc2VydChDb250YWluZXJMaXN0LCBDb250YWluZXIpCgkJCgkJaWYgbm90IEZpcnN0VGFiIHRoZW4gQ29udGFpbmVyLlBhcmVudCA9IENvbnRhaW5lcnMgZW5kCgkJCgkJbG9jYWwgZnVuY3Rpb24gVGFicygpCgkJCWlmIENvbnRhaW5lci5QYXJlbnQgdGhlbiByZXR1cm4gZW5kCgkJCWZvciBfLEZyYW1lIGluIHBhaXJzKENvbnRhaW5lckxpc3QpIGRvCgkJCQlpZiBGcmFtZTpJc0EoIlNjcm9sbGluZ0ZyYW1lIikgYW5kIEZyYW1lIH49IENvbnRhaW5lciB0aGVuCgkJCQkJRnJhbWUuUGFyZW50ID0gbmlsCgkJCQllbmQKCQkJZW5kCgkJCUNvbnRhaW5lci5QYXJlbnQgPSBDb250YWluZXJzCgkJCUNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDE1MCkKCQkJdGFibGUuZm9yZWFjaChyZWR6bGliLlRhYnMsIGZ1bmN0aW9uKF8sVGFiKQoJCQkJaWYgVGFiLkNvbnQgfj0gQ29udGFpbmVyIHRoZW4KCQkJCQlUYWIuZnVuYzpEaXNhYmxlKCkKCQkJCWVuZAoJCQllbmQpCgkJCUNyZWF0ZVR3ZWVuKHtDb250YWluZXIsICJTaXplIiwgVURpbTIubmV3KDEsIDAsIDEsIDApLCAwLjN9KQoJCQlDcmVhdGVUd2Vlbih7TGFiZWxUaXRsZSwgIlRleHRUcmFuc3BhcmVuY3kiLCAwLCAwLjM1fSkKCQkJQ3JlYXRlVHdlZW4oe0xhYmVsSWNvbiwgIkltYWdlVHJhbnNwYXJlbmN5IiwgMCwgMC4zNX0pCgkJCUNyZWF0ZVR3ZWVuKHtTZWxlY3RlZCwgIlNpemUiLCBVRGltMi5uZXcoMCwgNCwgMCwgMTMpLCAwLjM1fSkKCQkJQ3JlYXRlVHdlZW4oe1NlbGVjdGVkLCAiQmFja2dyb3VuZFRyYW5zcGFyZW5jeSIsIDAsIDAuMzV9KQoJCWVuZAoJCVRhYlNlbGVjdC5BY3RpdmF0ZWQ6Q29ubmVjdChUYWJzKQoJCQoJCUZpcnN0VGFiID0gdHJ1ZQoJCWxvY2FsIFRhYiA9IHt9CgkJdGFibGUuaW5zZXJ0KHJlZHpsaWIuVGFicywge1RhYkluZm8gPSB7TmFtZSA9IFROYW1lLCBJY29uID0gVEljb259LCBmdW5jID0gVGFiLCBDb250ID0gQ29udGFpbmVyfSkKCQlUYWIuQ29udCA9IENvbnRhaW5lcgoJCQoJCWZ1bmN0aW9uIFRhYjpEaXNhYmxlKCkKCQkJQ29udGFpbmVyLlBhcmVudCA9IG5pbAoJCQlDcmVhdGVUd2Vlbih7TGFiZWxUaXRsZSwgIlRleHRUcmFuc3BhcmVuY3kiLCAwLjMsIDAuMzV9KQoJCQlDcmVhdGVUd2Vlbih7TGFiZWxJY29uLCAiSW1hZ2VUcmFuc3BhcmVuY3kiLCAwLjMsIDAuMzV9KQoJCQlDcmVhdGVUd2Vlbih7U2VsZWN0ZWQsICJTaXplIiwgVURpbTIubmV3KDAsIDQsIDAsIDQpLCAwLjM1fSkKCQkJQ3JlYXRlVHdlZW4oe1NlbGVjdGVkLCAiQmFja2dyb3VuZFRyYW5zcGFyZW5jeSIsIDEsIDAuMzV9KQoJCWVuZAoJCWZ1bmN0aW9uIFRhYjpFbmFibGUoKQoJCQlUYWJzKCkKCQllbmQKCQlmdW5jdGlvbiBUYWI6VmlzaWJsZShCb29sKQoJCQlGdW5jczpUb2dnbGVWaXNpYmxlKFRhYlNlbGVjdCwgQm9vbCkKCQkJRnVuY3M6VG9nZ2xlUGFyZW50KENvbnRhaW5lciwgQm9vbCwgQ29udGFpbmVycykKCQllbmQKCQlmdW5jdGlvbiBUYWI6RGVzdHJveSgpIFRhYlNlbGVjdDpEZXN0cm95KCkgQ29udGFpbmVyOkRlc3Ryb3koKSBlbmQKCQkKCQlmdW5jdGlvbiBUYWI6QWRkU2VjdGlvbihDb25maWdzKQoJCQlsb2NhbCBTZWN0aW9uTmFtZSA9IHR5cGUoQ29uZmlncykgPT0gInN0cmluZyIgYW5kIENvbmZpZ3Mgb3IgQ29uZmlnc1sxXSBvciBDb25maWdzLk5hbWUgb3IgQ29uZmlncy5UaXRsZSBvciBDb25maWdzLlNlY3Rpb24KCQkJCgkJCWxvY2FsIFNlY3Rpb25GcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBDb250YWluZXIsIHsKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlOYW1lID0gIk9wdGlvbiIKCQkJfSkKCQkJCgkJCWxvY2FsIFNlY3Rpb25MYWJlbCA9IEluc2VydFRoZW1lKENyZWF0ZSgiVGV4dExhYmVsIiwgU2VjdGlvbkZyYW1lLCB7CgkJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCgkJCQlUZXh0ID0gU2VjdGlvbk5hbWUsCgkJCQlUZXh0Q29sb3IzID0gVGhlbWVbIkNvbG9yIFRleHQiXSwKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgLTI1LCAxLCAwKSwKCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUpLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlUZXh0VHJ1bmNhdGUgPSAiQXRFbmQiLAoJCQkJVGV4dFNpemUgPSAxNCwKCQkJCVRleHRYQWxpZ25tZW50ID0gIkxlZnQiCgkJCX0pLCAiVGV4dCIpCgkJCQoJCQlsb2NhbCBTZWN0aW9uID0ge30KCQkJdGFibGUuaW5zZXJ0KHJlZHpsaWIuT3B0aW9ucywge3R5cGUgPSAiU2VjdGlvbiIsIE5hbWUgPSBTZWN0aW9uTmFtZSwgZnVuYyA9IFNlY3Rpb259KQoJCQlmdW5jdGlvbiBTZWN0aW9uOlZpc2libGUoQm9vbCkKCQkJCWlmIEJvb2wgPT0gbmlsIHRoZW4gU2VjdGlvbkZyYW1lLlZpc2libGUgPSBub3QgU2VjdGlvbkZyYW1lLlZpc2libGUgcmV0dXJuIGVuZAoJCQkJU2VjdGlvbkZyYW1lLlZpc2libGUgPSBCb29sCgkJCWVuZAoJCQlmdW5jdGlvbiBTZWN0aW9uOkRlc3Ryb3koKQoJCQkJU2VjdGlvbkZyYW1lOkRlc3Ryb3koKQoJCQllbmQKCQkJZnVuY3Rpb24gU2VjdGlvbjpTZXQoTmV3KQoJCQkJaWYgTmV3IHRoZW4KCQkJCQlTZWN0aW9uTGFiZWwuVGV4dCA9IEdldFN0cihOZXcpCgkJCQllbmQKCQkJZW5kCgkJCXJldHVybiBTZWN0aW9uCgkJZW5kCgkJZnVuY3Rpb24gVGFiOkFkZFBhcmFncmFwaChDb25maWdzKQoJCQlsb2NhbCBQTmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5UaXRsZSBvciAiUGFyYWdyYXBoIgoJCQlsb2NhbCBQRGVzYyA9IENvbmZpZ3NbMl0gb3IgQ29uZmlncy5UZXh0IG9yICIiCgkJCQoJCQlsb2NhbCBGcmFtZSwgTGFiZWxGdW5jID0gQnV0dG9uRnJhbWUoQ29udGFpbmVyLCBQTmFtZSwgUERlc2MsIFVEaW0yLm5ldygxLCAtMjApKQoJCQkKCQkJbG9jYWwgUGFyYWdyYXBoID0ge30KCQkJZnVuY3Rpb24gUGFyYWdyYXBoOlZpc2libGUoLi4uKSBGdW5jczpUb2dnbGVWaXNpYmxlKEZyYW1lLCAuLi4pIGVuZAoJCQlmdW5jdGlvbiBQYXJhZ3JhcGg6RGVzdHJveSgpIEZyYW1lOkRlc3Ryb3koKSBlbmQKCQkJZnVuY3Rpb24gUGFyYWdyYXBoOlNldFRpdGxlKFZhbCkKCQkJCUxhYmVsRnVuYzpTZXRUaXRsZShHZXRTdHIoVmFsKSkKCQkJZW5kCgkJCWZ1bmN0aW9uIFBhcmFncmFwaDpTZXREZXNjKFZhbCkKCQkJCUxhYmVsRnVuYzpTZXREZXNjKEdldFN0cihWYWwpKQoJCQllbmQKCQkJZnVuY3Rpb24gUGFyYWdyYXBoOlNldChWYWwxLCBWYWwyKQoJCQkJaWYgVmFsMSBhbmQgVmFsMiB0aGVuCgkJCQkJTGFiZWxGdW5jOlNldFRpdGxlKEdldFN0cihWYWwxKSkKCQkJCQlMYWJlbEZ1bmM6U2V0RGVzYyhHZXRTdHIoVmFsMikpCgkJCQllbHNlaWYgVmFsMSB0aGVuCgkJCQkJTGFiZWxGdW5jOlNldERlc2MoR2V0U3RyKFZhbDEpKQoJCQkJZW5kCgkJCWVuZAoJCQlyZXR1cm4gUGFyYWdyYXBoCgkJZW5kCgkJZnVuY3Rpb24gVGFiOkFkZEJ1dHRvbihDb25maWdzKQoJCQlsb2NhbCBCTmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yIENvbmZpZ3MuVGl0bGUgb3IgIkJ1dHRvbiEiCgkJCWxvY2FsIEJEZXNjcmlwdGlvbiA9IENvbmZpZ3MuRGVzYyBvciBDb25maWdzLkRlc2NyaXB0aW9uIG9yICIiCgkJCWxvY2FsIENhbGxiYWNrID0gRnVuY3M6R2V0Q2FsbGJhY2soQ29uZmlncywgMikKCQkJCgkJCWxvY2FsIEZCdXR0b24sIExhYmVsRnVuYyA9IEJ1dHRvbkZyYW1lKENvbnRhaW5lciwgQk5hbWUsIEJEZXNjcmlwdGlvbiwgVURpbTIubmV3KDEsIC0yMCkpCgkJCQoJCQlsb2NhbCBCdXR0b25JY29uID0gQ3JlYXRlKCJJbWFnZUxhYmVsIiwgRkJ1dHRvbiwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCAxNCwgMCwgMTQpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTEwLCAwLjUpLAoJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwLjUpLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlJbWFnZSA9ICJyYnhhc3NldGlkOi8vMTA3MDk3OTE0MzciCgkJCX0pCgkJCQoJCQlGQnV0dG9uLkFjdGl2YXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCUZ1bmNzOkZpcmVDYWxsYmFjayhDYWxsYmFjaykKCQkJZW5kKQoJCQkKCQkJbG9jYWwgQnV0dG9uID0ge30KCQkJZnVuY3Rpb24gQnV0dG9uOlZpc2libGUoLi4uKSBGdW5jczpUb2dnbGVWaXNpYmxlKEZCdXR0b24sIC4uLikgZW5kCgkJCWZ1bmN0aW9uIEJ1dHRvbjpEZXN0cm95KCkgRkJ1dHRvbjpEZXN0cm95KCkgZW5kCgkJCWZ1bmN0aW9uIEJ1dHRvbjpDYWxsYmFjayguLi4pIEZ1bmNzOkluc2VydENhbGxiYWNrKENhbGxiYWNrLCAuLi4pIGVuZAoJCQlmdW5jdGlvbiBCdXR0b246U2V0KFZhbDEsIFZhbDIpCgkJCQlpZiB0eXBlKFZhbDEpID09ICJzdHJpbmciIGFuZCB0eXBlKFZhbDIpID09ICJzdHJpbmciIHRoZW4KCQkJCQlMYWJlbEZ1bmM6U2V0VGl0bGUoVmFsMSkKCQkJCQlMYWJlbEZ1bmM6U2V0RGVzYyhWYWwyKQoJCQkJZWxzZWlmIHR5cGUoVmFsMSkgPT0gInN0cmluZyIgdGhlbgoJCQkJCUxhYmVsRnVuYzpTZXRUaXRsZShWYWwxKQoJCQkJZWxzZWlmIHR5cGUoVmFsMSkgPT0gImZ1bmN0aW9uIiB0aGVuCgkJCQkJQ2FsbGJhY2sgPSBWYWwxCgkJCQllbmQKCQkJZW5kCgkJCXJldHVybiBCdXR0b24KCQllbmQKCQlmdW5jdGlvbiBUYWI6QWRkVG9nZ2xlKENvbmZpZ3MpCgkJCWxvY2FsIFROYW1lID0gQ29uZmlnc1sxXSBvciBDb25maWdzLk5hbWUgb3IgQ29uZmlncy5UaXRsZSBvciAiVG9nZ2xlIgoJCQlsb2NhbCBURGVzYyA9IENvbmZpZ3MuRGVzYyBvciBDb25maWdzLkRlc2NyaXB0aW9uIG9yICIiCgkJCWxvY2FsIENhbGxiYWNrID0gRnVuY3M6R2V0Q2FsbGJhY2soQ29uZmlncywgMykKCQkJbG9jYWwgRmxhZyA9IENvbmZpZ3NbNF0gb3IgQ29uZmlncy5GbGFnIG9yIGZhbHNlCgkJCWxvY2FsIERlZmF1bHQgPSBDb25maWdzWzJdIG9yIENvbmZpZ3MuRGVmYXVsdCBvciBmYWxzZQoJCQlpZiBDaGVja0ZsYWcoRmxhZykgdGhlbiBEZWZhdWx0ID0gR2V0RmxhZyhGbGFnKSBlbmQKCQkJCgkJCWxvY2FsIEJ1dHRvbiwgTGFiZWxGdW5jID0gQnV0dG9uRnJhbWUoQ29udGFpbmVyLCBUTmFtZSwgVERlc2MsIFVEaW0yLm5ldygxLCAtMzgpKQoJCQkKCQkJbG9jYWwgVG9nZ2xlSG9sZGVyID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJGcmFtZSIsIEJ1dHRvbiwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMTgpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTEwLCAwLjUpLAoJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwLjUpLAoJCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBTdHJva2UiXQoJCQl9KSwgIlN0cm9rZSIpTWFrZSgiQ29ybmVyIiwgVG9nZ2xlSG9sZGVyLCBVRGltLm5ldygwLjUsIDApKQoJCQkKCQkJbG9jYWwgU2xpZGVyID0gQ3JlYXRlKCJGcmFtZSIsIFRvZ2dsZUhvbGRlciwgewoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlTaXplID0gVURpbTIubmV3KDAuOCwgMCwgMC44LCAwKSwKCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41LCAwKSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgkJCX0pCgkJCQoJCQlsb2NhbCBUb2dnbGUgPSBJbnNlcnRUaGVtZShDcmVhdGUoIkZyYW1lIiwgU2xpZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAsIDEyLCAwLCAxMiksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjUpLAoJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpLAoJCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBUaGVtZSJdCgkJCX0pLCAiVGhlbWUiKU1ha2UoIkNvcm5lciIsIFRvZ2dsZSwgVURpbS5uZXcoMC41LCAwKSkKCQkJCgkJCWxvY2FsIFdhaXRDbGljawoJCQlsb2NhbCBmdW5jdGlvbiBTZXRUb2dnbGUoVmFsKQoJCQkJaWYgV2FpdENsaWNrIHRoZW4gcmV0dXJuIGVuZAoJCQkJCgkJCQlXYWl0Q2xpY2ssIERlZmF1bHQgPSB0cnVlLCBWYWwKCQkJCVNldEZsYWcoRmxhZywgRGVmYXVsdCkKCQkJCUZ1bmNzOkZpcmVDYWxsYmFjayhDYWxsYmFjaywgRGVmYXVsdCkKCQkJCWlmIERlZmF1bHQgdGhlbgoJCQkJCUNyZWF0ZVR3ZWVuKHtUb2dnbGUsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygxLCAwLCAwLjUpLCAwLjI1fSkKCQkJCQlDcmVhdGVUd2Vlbih7VG9nZ2xlLCAiQmFja2dyb3VuZFRyYW5zcGFyZW5jeSIsIDAsIDAuMjV9KQoJCQkJCUNyZWF0ZVR3ZWVuKHtUb2dnbGUsICJBbmNob3JQb2ludCIsIFZlY3RvcjIubmV3KDEsIDAuNSksIDAuMjUsIFdhaXQgb3IgZmFsc2V9KQoJCQkJZWxzZQoJCQkJCUNyZWF0ZVR3ZWVuKHtUb2dnbGUsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCAwLCAwLjUpLCAwLjI1fSkKCQkJCQlDcmVhdGVUd2Vlbih7VG9nZ2xlLCAiQmFja2dyb3VuZFRyYW5zcGFyZW5jeSIsIDAuOCwgMC4yNX0pCgkJCQkJQ3JlYXRlVHdlZW4oe1RvZ2dsZSwgIkFuY2hvclBvaW50IiwgVmVjdG9yMi5uZXcoMCwgMC41KSwgMC4yNSwgV2FpdCBvciBmYWxzZX0pCgkJCQllbmQKCQkJCVdhaXRDbGljayA9IGZhbHNlCgkJCWVuZDt0YXNrLnNwYXduKFNldFRvZ2dsZSwgRGVmYXVsdCkKCQkJCgkJCUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlTZXRUb2dnbGUobm90IERlZmF1bHQpCgkJCWVuZCkKCQkJCgkJCWxvY2FsIFRvZ2dsZSA9IHt9CgkJCWZ1bmN0aW9uIFRvZ2dsZTpWaXNpYmxlKC4uLikgRnVuY3M6VG9nZ2xlVmlzaWJsZShCdXR0b24sIC4uLikgZW5kCgkJCWZ1bmN0aW9uIFRvZ2dsZTpEZXN0cm95KCkgQnV0dG9uOkRlc3Ryb3koKSBlbmQKCQkJZnVuY3Rpb24gVG9nZ2xlOkNhbGxiYWNrKC4uLikgRnVuY3M6SW5zZXJ0Q2FsbGJhY2soQ2FsbGJhY2ssIC4uLikoKSBlbmQKCQkJZnVuY3Rpb24gVG9nZ2xlOlNldChWYWwxLCBWYWwyKQoJCQkJaWYgdHlwZShWYWwxKSA9PSAic3RyaW5nIiBhbmQgdHlwZShWYWwyKSA9PSAic3RyaW5nIiB0aGVuCgkJCQkJTGFiZWxGdW5jOlNldFRpdGxlKFZhbDEpCgkJCQkJTGFiZWxGdW5jOlNldERlc2MoVmFsMikKCQkJCWVsc2VpZiB0eXBlKFZhbDEpID09ICJzdHJpbmciIHRoZW4KCQkJCQlMYWJlbEZ1bmM6U2V0VGl0bGUoVmFsMSwgZmFsc2UsIHRydWUpCgkJCQllbHNlaWYgdHlwZShWYWwxKSA9PSAiYm9vbGVhbiIgdGhlbgoJCQkJCWlmIFdhaXRDbGljayBhbmQgVmFsMiB0aGVuCgkJCQkJCXJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBub3QgV2FpdENsaWNrCgkJCQkJZW5kCgkJCQkJdGFzay5zcGF3bihTZXRUb2dnbGUsIFZhbDEpCgkJCQllbHNlaWYgdHlwZShWYWwxKSA9PSAiZnVuY3Rpb24iIHRoZW4KCQkJCQlDYWxsYmFjayA9IFZhbDEKCQkJCWVuZAoJCQllbmQKCQkJcmV0dXJuIFRvZ2dsZQoJCWVuZAoJCWZ1bmN0aW9uIFRhYjpBZGREcm9wZG93bihDb25maWdzKQoJCQlsb2NhbCBETmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yIENvbmZpZ3MuVGl0bGUgb3IgIkRyb3Bkb3duIgoJCQlsb2NhbCBERGVzYyA9IENvbmZpZ3MuRGVzYyBvciBDb25maWdzLkRlc2NyaXB0aW9uIG9yICIiCgkJCWxvY2FsIERPcHRpb25zID0gQ29uZmlnc1syXSBvciBDb25maWdzLk9wdGlvbnMgb3Ige30KCQkJbG9jYWwgT3BEZWZhdWx0ID0gQ29uZmlnc1szXSBvciBDb25maWdzLkRlZmF1bHQgb3Ige30KCQkJbG9jYWwgRmxhZyA9IENvbmZpZ3NbNV0gb3IgQ29uZmlncy5GbGFnIG9yIGZhbHNlCgkJCWxvY2FsIERNdWx0aVNlbGVjdCA9IENvbmZpZ3MuTXVsdGlTZWxlY3Qgb3IgZmFsc2UKCQkJbG9jYWwgQ2FsbGJhY2sgPSBGdW5jczpHZXRDYWxsYmFjayhDb25maWdzLCA0KQoJCQkKCQkJbG9jYWwgQnV0dG9uLCBMYWJlbEZ1bmMgPSBCdXR0b25GcmFtZShDb250YWluZXIsIEROYW1lLCBERGVzYywgVURpbTIubmV3KDEsIC0xODApKQoJCQkKCQkJbG9jYWwgU2VsZWN0ZWRGcmFtZSA9IEluc2VydFRoZW1lKENyZWF0ZSgiRnJhbWUiLCBCdXR0b24sIHsKCQkJCVNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCAxOCksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMTAsIDAuNSksCgkJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSksCgkJCQlCYWNrZ3JvdW5kQ29sb3IzID0gVGhlbWVbIkNvbG9yIFN0cm9rZSJdCgkJCX0pLCAiU3Ryb2tlIilNYWtlKCJDb3JuZXIiLCBTZWxlY3RlZEZyYW1lLCBVRGltLm5ldygwLCA0KSkKCQkJCgkJCWxvY2FsIEFjdGl2ZUxhYmVsID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0TGFiZWwiLCBTZWxlY3RlZEZyYW1lLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAuODUsIDAsIDAuODUsIDApLAoJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCksCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJCUZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZCwKCQkJCVRleHRTY2FsZWQgPSB0cnVlLAoJCQkJVGV4dENvbG9yMyA9IFRoZW1lWyJDb2xvciBUZXh0Il0sCgkJCQlUZXh0ID0gIi4uLiIKCQkJfSksICJUZXh0IikKCQkJCgkJCWxvY2FsIEFycm93ID0gQ3JlYXRlKCJJbWFnZUxhYmVsIiwgU2VsZWN0ZWRGcmFtZSwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCAxNSwgMCwgMTUpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgLTUsIDAuNSksCgkJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSksCgkJCQlJbWFnZSA9ICJyYnhhc3NldGlkOi8vMTA3MDk3OTE1MjMiLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCQkJfSkKCQkJCgkJCWxvY2FsIE5vQ2xpY2tGcmFtZSA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIERyb3Bkb3duSG9sZGVyLCB7CgkJCQlOYW1lID0gIkFudGlDbGljayIsCgkJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlWaXNpYmxlID0gZmFsc2UsCgkJCQlUZXh0ID0gIiIKCQkJfSkKCQkJCgkJCWxvY2FsIERyb3BGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBOb0NsaWNrRnJhbWUsIHsKCQkJCVNpemUgPSBVRGltMi5uZXcoU2VsZWN0ZWRGcmFtZS5TaXplLlgsIDAsIDApLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMSwKCQkJCUJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMSksCgkJCQlOYW1lID0gIkRyb3Bkb3duRnJhbWUiLAoJCQkJQ2xpcHNEZXNjZW5kYW50cyA9IHRydWUsCgkJCQlBY3RpdmUgPSB0cnVlCgkJCX0pTWFrZSgiQ29ybmVyIiwgRHJvcEZyYW1lKU1ha2UoIlN0cm9rZSIsIERyb3BGcmFtZSlNYWtlKCJHcmFkaWVudCIsIERyb3BGcmFtZSwge1JvdGF0aW9uID0gNjB9KQoJCQkKCQkJbG9jYWwgU2Nyb2xsRnJhbWUgPSBJbnNlcnRUaGVtZShDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgRHJvcEZyYW1lLCB7CgkJCQlTY3JvbGxCYXJJbWFnZUNvbG9yMyA9IFRoZW1lWyJDb2xvciBUaGVtZSJdLAoJCQkJU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKCQkJCVNjcm9sbEJhclRoaWNrbmVzcyA9IDEuNSwKCQkJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCQkJQm9yZGVyU2l6ZVBpeGVsID0gMCwKCQkJCUNhbnZhc1NpemUgPSBVRGltMi5uZXcoKSwKCQkJCVNjcm9sbGluZ0RpcmVjdGlvbiA9ICJZIiwKCQkJCUF1dG9tYXRpY0NhbnZhc1NpemUgPSAiWSIsCgkJCQlBY3RpdmUgPSB0cnVlCgkJCX0sIHsKCQkJCUNyZWF0ZSgiVUlQYWRkaW5nIiwgewoJCQkJCVBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgOCksCgkJCQkJUGFkZGluZ1JpZ2h0ID0gVURpbS5uZXcoMCwgOCksCgkJCQkJUGFkZGluZ1RvcCA9IFVEaW0ubmV3KDAsIDUpLAoJCQkJCVBhZGRpbmdCb3R0b20gPSBVRGltLm5ldygwLCA1KQoJCQkJfSksIENyZWF0ZSgiVUlMaXN0TGF5b3V0IiwgewoJCQkJCVBhZGRpbmcgPSBVRGltLm5ldygwLCA0KQoJCQkJfSkKCQkJfSksICJTY3JvbGxCYXIiKQoJCQkKCQkJbG9jYWwgU2Nyb2xsU2l6ZSwgV2FpdENsaWNrID0gNQoJCQlsb2NhbCBmdW5jdGlvbiBEaXNhYmxlKCkKCQkJCVdhaXRDbGljayA9IHRydWUKCQkJCUNyZWF0ZVR3ZWVuKHtBcnJvdywgIlJvdGF0aW9uIiwgMCwgMC4yfSkKCQkJCUNyZWF0ZVR3ZWVuKHtEcm9wRnJhbWUsICJTaXplIiwgVURpbTIubmV3KDAsIDE1MiwgMCwgMCksIDAuMiwgdHJ1ZX0pCgkJCQlDcmVhdGVUd2Vlbih7QXJyb3csICJJbWFnZUNvbG9yMyIsIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLCAwLjJ9KQoJCQkJQXJyb3cuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEwNzA5NzkxNTIzIgoJCQkJTm9DbGlja0ZyYW1lLlZpc2libGUgPSBmYWxzZQoJCQkJV2FpdENsaWNrID0gZmFsc2UKCQkJZW5kCgkJCQoJCQlsb2NhbCBmdW5jdGlvbiBHZXRGcmFtZVNpemUoKQoJCQkJcmV0dXJuIFVEaW0yLmZyb21PZmZzZXQoMTUyLCBTY3JvbGxTaXplKQoJCQllbmQKCQkJCgkJCWxvY2FsIGZ1bmN0aW9uIENhbGN1bGF0ZVNpemUoKQoJCQkJbG9jYWwgQ291bnQgPSAwCgkJCQlmb3IgXyxGcmFtZSBpbiBwYWlycyhTY3JvbGxGcmFtZTpHZXRDaGlsZHJlbigpKSBkbwoJCQkJCWlmIEZyYW1lOklzQSgiRnJhbWUiKSBvciBGcmFtZS5OYW1lID09ICJPcHRpb24iIHRoZW4KCQkJCQkJQ291bnQgPSBDb3VudCArIDEKCQkJCQllbmQKCQkJCWVuZAoJCQkJU2Nyb2xsU2l6ZSA9IChtYXRoLmNsYW1wKENvdW50LCAwLCAxMCkgKiAyNSkgKyAxMAoJCQkJaWYgTm9DbGlja0ZyYW1lLlZpc2libGUgdGhlbgoJCQkJCU5vQ2xpY2tGcmFtZS5WaXNpYmxlID0gdHJ1ZQoJCQkJCUNyZWF0ZVR3ZWVuKHtEcm9wRnJhbWUsICJTaXplIiwgR2V0RnJhbWVTaXplKCksIDAuMiwgdHJ1ZX0pCgkJCQllbmQKCQkJZW5kCgkJCQoJCQlsb2NhbCBmdW5jdGlvbiBNaW5pbWl6ZSgpCgkJCQlpZiBXYWl0Q2xpY2sgdGhlbiByZXR1cm4gZW5kCgkJCQlXYWl0Q2xpY2sgPSB0cnVlCgkJCQlpZiBOb0NsaWNrRnJhbWUuVmlzaWJsZSB0aGVuCgkJCQkJQXJyb3cuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEwNzA5NzkxNTIzIgoJCQkJCUNyZWF0ZVR3ZWVuKHtBcnJvdywgIkltYWdlQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksIDAuMn0pCgkJCQkJQ3JlYXRlVHdlZW4oe0Ryb3BGcmFtZSwgIlNpemUiLCBVRGltMi5uZXcoMCwgMTUyLCAwLCAwKSwgMC4yLCB0cnVlfSkKCQkJCQlOb0NsaWNrRnJhbWUuVmlzaWJsZSA9IGZhbHNlCgkJCQllbHNlCgkJCQkJTm9DbGlja0ZyYW1lLlZpc2libGUgPSB0cnVlCgkJCQkJQXJyb3cuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEwNzA5NzkwOTQ4IgoJCQkJCUNyZWF0ZVR3ZWVuKHtBcnJvdywgIkltYWdlQ29sb3IzIiwgVGhlbWVbIkNvbG9yIFRoZW1lIl0sIDAuMn0pCgkJCQkJQ3JlYXRlVHdlZW4oe0Ryb3BGcmFtZSwgIlNpemUiLCBHZXRGcmFtZVNpemUoKSwgMC4yLCB0cnVlfSkKCQkJCWVuZAoJCQkJV2FpdENsaWNrID0gZmFsc2UKCQkJZW5kCgkJCQoJCQlsb2NhbCBmdW5jdGlvbiBDYWxjdWxhdGVQb3MoKQoJCQkJbG9jYWwgRnJhbWVQb3MgPSBTZWxlY3RlZEZyYW1lLkFic29sdXRlUG9zaXRpb24KCQkJCWxvY2FsIFNjcmVlblNpemUgPSBTY3JlZW5HdWkuQWJzb2x1dGVTaXplCgkJCQlsb2NhbCBDbGFtcFggPSBtYXRoLmNsYW1wKChGcmFtZVBvcy5YIC8gVUlTY2FsZSksIDAsIFNjcmVlblNpemUuWCAvIFVJU2NhbGUgLSBEcm9wRnJhbWUuU2l6ZS5YLk9mZnNldCkKCQkJCWxvY2FsIENsYW1wWSA9IG1hdGguY2xhbXAoKEZyYW1lUG9zLlkgLyBVSVNjYWxlKSAsIDAsIFNjcmVlblNpemUuWSAvIFVJU2NhbGUpCgkJCQkKCQkJCWxvY2FsIE5ld1BvcyA9IFVEaW0yLmZyb21PZmZzZXQoQ2xhbXBYLCBDbGFtcFkpCgkJCQlsb2NhbCBBbmNob3JQb2ludCA9IEZyYW1lUG9zLlkgPiBTY3JlZW5TaXplLlkgLyAxLjQgYW5kIDEgb3IgU2Nyb2xsU2l6ZSA+IDgwIGFuZCAwLjUgb3IgMAoJCQkJRHJvcEZyYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgQW5jaG9yUG9pbnQpCgkJCQlDcmVhdGVUd2Vlbih7RHJvcEZyYW1lLCAiUG9zaXRpb24iLCBOZXdQb3MsIDAuMX0pCgkJCWVuZAoJCQkKCQkJbG9jYWwgQWRkTmV3T3B0aW9ucywgR2V0T3B0aW9ucywgQWRkT3B0aW9uLCBSZW1vdmVPcHRpb24sIFNlbGVjdGVkIGRvCgkJCQlsb2NhbCBEZWZhdWx0ID0gdHlwZShPcERlZmF1bHQpIH49ICJ0YWJsZSIgYW5kIHtPcERlZmF1bHR9IG9yIE9wRGVmYXVsdAoJCQkJbG9jYWwgTXVsdGlTZWxlY3QgPSBETXVsdGlTZWxlY3QKCQkJCWxvY2FsIE9wdGlvbnMgPSB7fQoJCQkJU2VsZWN0ZWQgPSBNdWx0aVNlbGVjdCBhbmQge30gb3IgQ2hlY2tGbGFnKEZsYWcpIGFuZCBHZXRGbGFnKEZsYWcpIG9yIERlZmF1bHRbMV0KCQkJCQoJCQkJaWYgTXVsdGlTZWxlY3QgdGhlbgoJCQkJCWZvciBpbmRleCwgVmFsdWUgaW4gcGFpcnMoQ2hlY2tGbGFnKEZsYWcpIGFuZCBHZXRGbGFnKEZsYWcpIG9yIERlZmF1bHQpIGRvCgkJCQkJCWlmIHR5cGUoaW5kZXgpID09ICJzdHJpbmciIGFuZCAoRE9wdGlvbnNbaW5kZXhdIG9yIHRhYmxlLmZpbmQoRE9wdGlvbnMsIGluZGV4KSkgdGhlbgoJCQkJCQkJU2VsZWN0ZWRbaW5kZXhdID0gVmFsdWUKCQkJCQkJZWxzZWlmIERPcHRpb25zW1ZhbHVlXSB0aGVuCgkJCQkJCQlTZWxlY3RlZFtWYWx1ZV0gPSB0cnVlCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCQkKCQkJCWxvY2FsIGZ1bmN0aW9uIENhbGxiYWNrU2VsZWN0ZWQoKQoJCQkJCVNldEZsYWcoRmxhZywgTXVsdGlTZWxlY3QgYW5kIFNlbGVjdGVkIG9yIHRvc3RyaW5nKFNlbGVjdGVkKSkKCQkJCQlGdW5jczpGaXJlQ2FsbGJhY2soQ2FsbGJhY2ssIFNlbGVjdGVkKQoJCQkJZW5kCgkJCQkKCQkJCWxvY2FsIGZ1bmN0aW9uIFVwZGF0ZUxhYmVsKCkKCQkJCQlpZiBNdWx0aVNlbGVjdCB0aGVuCgkJCQkJCWxvY2FsIGxpc3QgPSB7fQoJCQkJCQlmb3IgaW5kZXgsIFZhbHVlIGluIHBhaXJzKFNlbGVjdGVkKSBkbwoJCQkJCQkJaWYgVmFsdWUgdGhlbgoJCQkJCQkJCXRhYmxlLmluc2VydChsaXN0LCBpbmRleCkKCQkJCQkJCWVuZAoJCQkJCQllbmQKCQkJCQkJQWN0aXZlTGFiZWwuVGV4dCA9ICNsaXN0ID4gMCBhbmQgdGFibGUuY29uY2F0KGxpc3QsICIsICIpIG9yICIuLi4iCgkJCQkJZWxzZQoJCQkJCQlBY3RpdmVMYWJlbC5UZXh0ID0gdG9zdHJpbmcoU2VsZWN0ZWQgb3IgIi4uLiIpCgkJCQkJZW5kCgkJCQllbmQKCQkJCQoJCQkJbG9jYWwgZnVuY3Rpb24gVXBkYXRlU2VsZWN0ZWQoKQoJCQkJCWlmIE11bHRpU2VsZWN0IHRoZW4KCQkJCQkJZm9yIF8sdiBpbiBwYWlycyhPcHRpb25zKSBkbwoJCQkJCQkJbG9jYWwgbm9kZXMsIFN0YXRzID0gdi5ub2Rlcywgdi5TdGF0cwoJCQkJCQkJQ3JlYXRlVHdlZW4oe25vZGVzWzJdLCAiQmFja2dyb3VuZFRyYW5zcGFyZW5jeSIsIFN0YXRzIGFuZCAwIG9yIDAuOCwgMC4zNX0pCgkJCQkJCQlDcmVhdGVUd2Vlbih7bm9kZXNbMl0sICJTaXplIiwgU3RhdHMgYW5kIFVEaW0yLmZyb21PZmZzZXQoNCwgMTIpIG9yIFVEaW0yLmZyb21PZmZzZXQoNCwgNCksIDAuMzV9KQoJCQkJCQkJQ3JlYXRlVHdlZW4oe25vZGVzWzNdLCAiVGV4dFRyYW5zcGFyZW5jeSIsIFN0YXRzIGFuZCAwIG9yIDAuNCwgMC4zNX0pCgkJCQkJCWVuZAoJCQkJCWVsc2UKCQkJCQkJZm9yIF8sdiBpbiBwYWlycyhPcHRpb25zKSBkbwoJCQkJCQkJbG9jYWwgU2x0ID0gdi5WYWx1ZSA9PSBTZWxlY3RlZAoJCQkJCQkJbG9jYWwgbm9kZXMgPSB2Lm5vZGVzCgkJCQkJCQlDcmVhdGVUd2Vlbih7bm9kZXNbMl0sICJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5IiwgU2x0IGFuZCAwIG9yIDEsIDAuMzV9KQoJCQkJCQkJQ3JlYXRlVHdlZW4oe25vZGVzWzJdLCAiU2l6ZSIsIFNsdCBhbmQgVURpbTIuZnJvbU9mZnNldCg0LCAxNCkgb3IgVURpbTIuZnJvbU9mZnNldCg0LCA0KSwgMC4zNX0pCgkJCQkJCQlDcmVhdGVUd2Vlbih7bm9kZXNbM10sICJUZXh0VHJhbnNwYXJlbmN5IiwgU2x0IGFuZCAwIG9yIDAuNCwgMC4zNX0pCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJCVVwZGF0ZUxhYmVsKCkKCQkJCWVuZAoJCQkJCgkJCQlsb2NhbCBmdW5jdGlvbiBTZWxlY3QoT3B0aW9uKQoJCQkJCWlmIE11bHRpU2VsZWN0IHRoZW4KCQkJCQkJT3B0aW9uLlN0YXRzID0gbm90IE9wdGlvbi5TdGF0cwoJCQkJCQlPcHRpb24uTGFzdENCID0gdGljaygpCgkJCQkJCQoJCQkJCQlTZWxlY3RlZFtPcHRpb24uTmFtZV0gPSBPcHRpb24uU3RhdHMKCQkJCQkJQ2FsbGJhY2tTZWxlY3RlZCgpCgkJCQkJZWxzZQoJCQkJCQlPcHRpb24uTGFzdENCID0gdGljaygpCgkJCQkJCQoJCQkJCQlTZWxlY3RlZCA9IE9wdGlvbi5WYWx1ZQoJCQkJCQlDYWxsYmFja1NlbGVjdGVkKCkKCQkJCQllbmQKCQkJCQlVcGRhdGVTZWxlY3RlZCgpCgkJCQllbmQKCQkJCQoJCQkJQWRkT3B0aW9uID0gZnVuY3Rpb24oaW5kZXgsIFZhbHVlKQoJCQkJCWxvY2FsIE5hbWUgPSB0b3N0cmluZyh0eXBlKGluZGV4KSA9PSAic3RyaW5nIiBhbmQgaW5kZXggb3IgVmFsdWUpCgkJCQkJCgkJCQkJaWYgT3B0aW9uc1tOYW1lXSB0aGVuIHJldHVybiBlbmQKCQkJCQlPcHRpb25zW05hbWVdID0gewoJCQkJCQlpbmRleCA9IGluZGV4LAoJCQkJCQlWYWx1ZSA9IFZhbHVlLAoJCQkJCQlOYW1lID0gTmFtZSwKCQkJCQkJU3RhdHMgPSBmYWxzZSwKCQkJCQkJTGFzdENCID0gMAoJCQkJCX0KCQkJCQkKCQkJCQlpZiBNdWx0aVNlbGVjdCB0aGVuCgkJCQkJCWxvY2FsIFN0YXRzID0gU2VsZWN0ZWRbTmFtZV0KCQkJCQkJU2VsZWN0ZWRbTmFtZV0gPSBTdGF0cyBvciBmYWxzZQoJCQkJCQlPcHRpb25zW05hbWVdLlN0YXRzID0gU3RhdHMKCQkJCQllbmQKCQkJCQkKCQkJCQlsb2NhbCBCdXR0b24gPSBNYWtlKCJCdXR0b24iLCBTY3JvbGxGcmFtZSwgewoJCQkJCQlOYW1lID0gIk9wdGlvbiIsCgkJCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjEpLAoJCQkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjUpLAoJCQkJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSkKCQkJCQl9KU1ha2UoIkNvcm5lciIsIEJ1dHRvbiwgVURpbS5uZXcoMCwgNCkpCgkJCQkJCgkJCQkJbG9jYWwgSXNTZWxlY3RlZCA9IEluc2VydFRoZW1lKENyZWF0ZSgiRnJhbWUiLCBCdXR0b24sIHsKCQkJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMSwgMC41KSwKCQkJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCA0LCAwLCA0KSwKCQkJCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBUaGVtZSJdLAoJCQkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpCgkJCQkJfSksICJUaGVtZSIpTWFrZSgiQ29ybmVyIiwgSXNTZWxlY3RlZCwgVURpbS5uZXcoMC41LCAwKSkKCQkJCQkKCQkJCQlsb2NhbCBPcHRpb25lTmFtZSA9IEluc2VydFRoZW1lKENyZWF0ZSgiVGV4dExhYmVsIiwgQnV0dG9uLCB7CgkJCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSksCgkJCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwKSwKCQkJCQkJVGV4dCA9IE5hbWUsCgkJCQkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGV4dCJdLAoJCQkJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCgkJCQkJCVRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAoJCQkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJVGV4dFRyYW5zcGFyZW5jeSA9IDAuNAoJCQkJCX0pLCAiVGV4dCIpCgkJCQkJCgkJCQkJQnV0dG9uLkFjdGl2YXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCQkJU2VsZWN0KE9wdGlvbnNbTmFtZV0pCgkJCQkJZW5kKQoJCQkJCQoJCQkJCU9wdGlvbnNbTmFtZV0ubm9kZXMgPSB7QnV0dG9uLCBJc1NlbGVjdGVkLCBPcHRpb25lTmFtZX0KCQkJCWVuZAoJCQkJCgkJCQlSZW1vdmVPcHRpb24gPSBmdW5jdGlvbihpbmRleCwgVmFsdWUpCgkJCQkJbG9jYWwgTmFtZSA9IHRvc3RyaW5nKHR5cGUoaW5kZXgpID09ICJzdHJpbmciIGFuZCBpbmRleCBvciBWYWx1ZSkKCQkJCQlpZiBPcHRpb25zW05hbWVdIHRoZW4KCQkJCQkJaWYgTXVsdGlTZWxlY3QgdGhlbiBTZWxlY3RlZFtOYW1lXSA9IG5pbCBlbHNlIFNlbGVjdGVkID0gbmlsIGVuZAoJCQkJCQlPcHRpb25zW05hbWVdLm5vZGVzWzFdOkRlc3Ryb3koKQoJCQkJCQl0YWJsZS5jbGVhcihPcHRpb25zW05hbWVdKQoJCQkJCQlPcHRpb25zW05hbWVdID0gbmlsCgkJCQkJZW5kCgkJCQllbmQKCQkJCQoJCQkJR2V0T3B0aW9ucyA9IGZ1bmN0aW9uKCkKCQkJCQlyZXR1cm4gT3B0aW9ucwoJCQkJZW5kCgkJCQkKCQkJCUFkZE5ld09wdGlvbnMgPSBmdW5jdGlvbihMaXN0LCBDbGVhcikKCQkJCQlpZiBDbGVhciB0aGVuCgkJCQkJCXRhYmxlLmZvcmVhY2goT3B0aW9ucywgUmVtb3ZlT3B0aW9uKQoJCQkJCWVuZAoJCQkJCXRhYmxlLmZvcmVhY2goTGlzdCwgQWRkT3B0aW9uKQoJCQkJCUNhbGxiYWNrU2VsZWN0ZWQoKQoJCQkJCVVwZGF0ZVNlbGVjdGVkKCkKCQkJCWVuZAoJCQkJCgkJCQl0YWJsZS5mb3JlYWNoKERPcHRpb25zLCBBZGRPcHRpb24pCgkJCQlDYWxsYmFja1NlbGVjdGVkKCkKCQkJCVVwZGF0ZVNlbGVjdGVkKCkKCQkJZW5kCgkJCQoJCQlCdXR0b24uQWN0aXZhdGVkOkNvbm5lY3QoTWluaW1pemUpCgkJCU5vQ2xpY2tGcmFtZS5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoRGlzYWJsZSkKCQkJTm9DbGlja0ZyYW1lLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoRGlzYWJsZSkKCQkJTWFpbkZyYW1lOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVmlzaWJsZSIpOkNvbm5lY3QoRGlzYWJsZSkKCQkJU2VsZWN0ZWRGcmFtZTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIkFic29sdXRlUG9zaXRpb24iKTpDb25uZWN0KENhbGN1bGF0ZVBvcykKCQkJCgkJCUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChDYWxjdWxhdGVTaXplKQoJCQlTY3JvbGxGcmFtZS5DaGlsZEFkZGVkOkNvbm5lY3QoQ2FsY3VsYXRlU2l6ZSkKCQkJU2Nyb2xsRnJhbWUuQ2hpbGRSZW1vdmVkOkNvbm5lY3QoQ2FsY3VsYXRlU2l6ZSkKCQkJQ2FsY3VsYXRlUG9zKCkKCQkJQ2FsY3VsYXRlU2l6ZSgpCgkJCQoJCQlsb2NhbCBEcm9wZG93biA9IHt9CgkJCWZ1bmN0aW9uIERyb3Bkb3duOlZpc2libGUoLi4uKSBGdW5jczpUb2dnbGVWaXNpYmxlKEJ1dHRvbiwgLi4uKSBlbmQKCQkJZnVuY3Rpb24gRHJvcGRvd246RGVzdHJveSgpIEJ1dHRvbjpEZXN0cm95KCkgZW5kCgkJCWZ1bmN0aW9uIERyb3Bkb3duOkNhbGxiYWNrKC4uLikgRnVuY3M6SW5zZXJ0Q2FsbGJhY2soQ2FsbGJhY2ssIC4uLikoU2VsZWN0ZWQpIGVuZAoJCQkKCQkJZnVuY3Rpb24gRHJvcGRvd246QWRkKC4uLikKCQkJCWxvY2FsIE5ld09wdGlvbnMgPSB7Li4ufQoJCQkJaWYgdHlwZShOZXdPcHRpb25zWzFdKSA9PSAidGFibGUiIHRoZW4KCQkJCQl0YWJsZS5mb3JlYWNoKE9wdGlvbiwgZnVuY3Rpb24oXyxOYW1lKQoJCQkJCQlBZGRPcHRpb24oTmFtZSkKCQkJCQllbmQpCgkJCQllbHNlCgkJCQkJdGFibGUuZm9yZWFjaChOZXdPcHRpb25zLCBmdW5jdGlvbihfLE5hbWUpCgkJCQkJCUFkZE9wdGlvbihOYW1lKQoJCQkJCWVuZCkKCQkJCWVuZAoJCQllbmQKCQkJZnVuY3Rpb24gRHJvcGRvd246UmVtb3ZlKE9wdGlvbikKCQkJCWZvciBpbmRleCwgVmFsdWUgaW4gcGFpcnMoR2V0T3B0aW9ucygpKSBkbwoJCQkJCWlmIHR5cGUoT3B0aW9uKSA9PSAibnVtYmVyIiBhbmQgaW5kZXggPT0gT3B0aW9uIG9yIFZhbHVlLk5hbWUgPT0gIk9wdGlvbiIgdGhlbgoJCQkJCQlSZW1vdmVPcHRpb24oaW5kZXgsIFZhbHVlLlZhbHVlKQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCQlmdW5jdGlvbiBEcm9wZG93bjpTZWxlY3QoT3B0aW9uKQoJCQkJaWYgdHlwZShPcHRpb24pID09ICJzdHJpbmciIHRoZW4KCQkJCQlmb3IgXyxWYWwgaW4gcGFpcnMoT3B0aW9ucykgZG8KCQkJCQkJaWYgVmFsLk5hbWUgPT0gT3B0aW9uIHRoZW4KCQkJCQkJCVZhbC5BY3RpdmUoKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVsc2VpZiB0eXBlKE9wdGlvbikgPT0gIm51bWJlciIgdGhlbgoJCQkJCWZvciBpbmQsVmFsIGluIHBhaXJzKE9wdGlvbnMpIGRvCgkJCQkJCWlmIGluZCA9PSBPcHRpb24gdGhlbgoJCQkJCQkJVmFsLkFjdGl2ZSgpCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCQlmdW5jdGlvbiBEcm9wZG93bjpTZXQoVmFsMSwgQ2xlYXIpCgkJCQlpZiB0eXBlKFZhbDEpID09ICJ0YWJsZSIgdGhlbgoJCQkJCUFkZE5ld09wdGlvbnMoVmFsMSwgbm90IENsZWFyKQoJCQkJZWxzZWlmIHR5cGUoVmFsMSkgPT0gImZ1bmN0aW9uIiB0aGVuCgkJCQkJQ2FsbGJhY2sgPSBWYWwxCgkJCQllbmQKCQkJZW5kCgkJCXJldHVybiBEcm9wZG93bgoJCWVuZAoJCWZ1bmN0aW9uIFRhYjpBZGRTbGlkZXIoQ29uZmlncykKCQkJbG9jYWwgU05hbWUgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuTmFtZSBvciBDb25maWdzLlRpdGxlIG9yICJTbGlkZXIhIgoJCQlsb2NhbCBTRGVzYyA9IENvbmZpZ3MuRGVzYyBvciBDb25maWdzLkRlc2NyaXB0aW9uIG9yICIiCgkJCWxvY2FsIE1pbiA9IENvbmZpZ3NbMl0gb3IgQ29uZmlncy5NaW5WYWx1ZSBvciBDb25maWdzLk1pbiBvciAxMAoJCQlsb2NhbCBNYXggPSBDb25maWdzWzNdIG9yIENvbmZpZ3MuTWF4VmFsdWUgb3IgQ29uZmlncy5NYXggb3IgMTAwCgkJCWxvY2FsIEluY3JlYXNlID0gQ29uZmlnc1s0XSBvciBDb25maWdzLkluY3JlYXNlIG9yIDEKCQkJbG9jYWwgQ2FsbGJhY2sgPSBGdW5jczpHZXRDYWxsYmFjayhDb25maWdzLCA2KQoJCQlsb2NhbCBGbGFnID0gQ29uZmlnc1s3XSBvciBDb25maWdzLkZsYWcgb3IgZmFsc2UKCQkJbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3NbNV0gb3IgQ29uZmlncy5EZWZhdWx0IG9yIDI1CgkJCWlmIENoZWNrRmxhZyhGbGFnKSB0aGVuIERlZmF1bHQgPSBHZXRGbGFnKEZsYWcpIGVuZAoJCQlNaW4sIE1heCA9IE1pbiAvIEluY3JlYXNlLCBNYXggLyBJbmNyZWFzZQoJCQkKCQkJbG9jYWwgQnV0dG9uLCBMYWJlbEZ1bmMgPSBCdXR0b25GcmFtZShDb250YWluZXIsIFNOYW1lLCBTRGVzYywgVURpbTIubmV3KDEsIC0xODApKQoJCQkKCQkJbG9jYWwgU2xpZGVySG9sZGVyID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgQnV0dG9uLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAuNDUsIDAsIDEpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMSksCgkJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAoJCQkJQXV0b0J1dHRvbkNvbG9yID0gZmFsc2UsCgkJCQlUZXh0ID0gIiIsCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCQl9KQoJCQkKCQkJbG9jYWwgU2xpZGVyQmFyID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJGcmFtZSIsIFNsaWRlckhvbGRlciwgewoJCQkJQmFja2dyb3VuZENvbG9yMyA9IFRoZW1lWyJDb2xvciBTdHJva2UiXSwKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCA2KSwKCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgkJCX0pLCAiU3Ryb2tlIilNYWtlKCJDb3JuZXIiLCBTbGlkZXJCYXIpCgkJCQoJCQlsb2NhbCBJbmRpY2F0b3IgPSBJbnNlcnRUaGVtZShDcmVhdGUoIkZyYW1lIiwgU2xpZGVyQmFyLCB7CgkJCQlCYWNrZ3JvdW5kQ29sb3IzID0gVGhlbWVbIkNvbG9yIFRoZW1lIl0sCgkJCQlTaXplID0gVURpbTIuZnJvbVNjYWxlKDAuMywgMSksCgkJCQlCb3JkZXJTaXplUGl4ZWwgPSAwCgkJCX0pLCAiVGhlbWUiKU1ha2UoIkNvcm5lciIsIEluZGljYXRvcikKCQkJCgkJCWxvY2FsIFNsaWRlckljb24gPSBDcmVhdGUoIkZyYW1lIiwgU2xpZGVyQmFyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAsIDYsIDAsIDEyKSwKCQkJCUJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMjAsIDIyMCwgMjIwKSwKCQkJCVBvc2l0aW9uID0gVURpbTIuZnJvbVNjYWxlKDAuMywgMC41KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMgoJCQl9KU1ha2UoIkNvcm5lciIsIFNsaWRlckljb24pCgkJCQoJCQlsb2NhbCBMYWJlbFZhbCA9IEluc2VydFRoZW1lKENyZWF0ZSgiVGV4dExhYmVsIiwgU2xpZGVySG9sZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAsIDE0LCAwLCAxNCksCgkJCQlBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjUpLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlUZXh0Q29sb3IzID0gVGhlbWVbIkNvbG9yIFRleHQiXSwKCQkJCUZvbnQgPSBFbnVtLkZvbnQuRnJlZG9rYU9uZSwKCQkJCVRleHRTaXplID0gMTIKCQkJfSksICJUZXh0IikKCQkJCgkJCWxvY2FsIFVJU2NhbGUgPSBDcmVhdGUoIlVJU2NhbGUiLCBMYWJlbFZhbCkKCQkJCgkJCWxvY2FsIEJhc2VNb3VzZVBvcyA9IENyZWF0ZSgiRnJhbWUiLCBTbGlkZXJCYXIsIHsKCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuNSwgMCksCgkJCQlWaXNpYmxlID0gZmFsc2UKCQkJfSkKCQkJCgkJCWxvY2FsIGZ1bmN0aW9uIFVwZGF0ZUxhYmVsKE5ld1ZhbHVlKQoJCQkJbG9jYWwgTnVtYmVyID0gdG9udW1iZXIoTmV3VmFsdWUgKiBJbmNyZWFzZSkKCQkJCU51bWJlciA9IG1hdGguZmxvb3IoTnVtYmVyICogMTAwKSAvIDEwMAoJCQkJCgkJCQlEZWZhdWx0LCBMYWJlbFZhbC5UZXh0ID0gTnVtYmVyLCB0b3N0cmluZyhOdW1iZXIpCgkJCQlGdW5jczpGaXJlQ2FsbGJhY2soQ2FsbGJhY2ssIERlZmF1bHQpCgkJCWVuZAoJCQkKCQkJbG9jYWwgZnVuY3Rpb24gQ29udHJvbFBvcygpCgkJCQlsb2NhbCBNb3VzZVBvcyA9IFBsYXllcjpHZXRNb3VzZSgpCgkJCQlsb2NhbCBBUG9zID0gTW91c2VQb3MuWCAtIEJhc2VNb3VzZVBvcy5BYnNvbHV0ZVBvc2l0aW9uLlgKCQkJCWxvY2FsIENvbmZpZ3VyZURwaVBvcyA9IEFQb3MgLyBTbGlkZXJCYXIuQWJzb2x1dGVTaXplLlgKCQkJCQoJCQkJU2xpZGVySWNvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldyhtYXRoLmNsYW1wKENvbmZpZ3VyZURwaVBvcywgMCwgMSksIDAsIDAuNSwgMCkKCQkJZW5kCgkJCQoJCQlsb2NhbCBmdW5jdGlvbiBVcGRhdGVWYWx1ZXMoKQoJCQkJSW5kaWNhdG9yLlNpemUgPSBVRGltMi5uZXcoU2xpZGVySWNvbi5Qb3NpdGlvbi5YLlNjYWxlLCAwLCAxLCAwKQoJCQkJbG9jYWwgU2xpZGVyUG9zID0gU2xpZGVySWNvbi5Qb3NpdGlvbi5YLlNjYWxlCgkJCQlsb2NhbCBOZXdWYWx1ZSA9IG1hdGguZmxvb3IoKChTbGlkZXJQb3MgKiBNYXgpIC8gTWF4KSAqIChNYXggLSBNaW4pICsgTWluKQoJCQkJVXBkYXRlTGFiZWwoTmV3VmFsdWUpCgkJCWVuZAoJCQkKCQkJU2xpZGVySG9sZGVyLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCgkJCQlDcmVhdGVUd2Vlbih7U2xpZGVySWNvbiwgIlRyYW5zcGFyZW5jeSIsIDAsIDAuM30pCgkJCQlDb250YWluZXIuU2Nyb2xsaW5nRW5hYmxlZCA9IGZhbHNlCgkJCQl3aGlsZSBVc2VySW5wdXRTZXJ2aWNlOklzTW91c2VCdXR0b25QcmVzc2VkKEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEpIGRvIHRhc2sud2FpdCgpCgkJCQkJQ29udHJvbFBvcygpCgkJCQllbmQKCQkJCUNyZWF0ZVR3ZWVuKHtTbGlkZXJJY29uLCAiVHJhbnNwYXJlbmN5IiwgMC4yLCAwLjN9KQoJCQkJQ29udGFpbmVyLlNjcm9sbGluZ0VuYWJsZWQgPSB0cnVlCgkJCQlTZXRGbGFnKEZsYWcsIERlZmF1bHQpCgkJCWVuZCkKCQkJCgkJCUxhYmVsVmFsOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVGV4dCIpOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJVUlTY2FsZS5TY2FsZSA9IDAuMwoJCQkJQ3JlYXRlVHdlZW4oe1VJU2NhbGUsICJTY2FsZSIsIDEuMiwgMC4xfSkKCQkJCUNyZWF0ZVR3ZWVuKHtMYWJlbFZhbCwgIlJvdGF0aW9uIiwgbWF0aC5yYW5kb20oLTEsIDEpICogNSwgMC4xNSwgdHJ1ZX0pCgkJCQlDcmVhdGVUd2Vlbih7VUlTY2FsZSwgIlNjYWxlIiwgMSwgMC4yfSkKCQkJCUNyZWF0ZVR3ZWVuKHtMYWJlbFZhbCwgIlJvdGF0aW9uIiwgMCwgMC4xfSkKCQkJZW5kKQoJCQkKCQkJZnVuY3Rpb24gU2V0U2xpZGVyKE5ld1ZhbHVlKQoJCQkJaWYgdHlwZShOZXdWYWx1ZSkgfj0gIm51bWJlciIgdGhlbiByZXR1cm4gZW5kCgkJCQkKCQkJCWxvY2FsIE1pbiwgTWF4ID0gTWluICogSW5jcmVhc2UsIE1heCAqIEluY3JlYXNlCgkJCQkKCQkJCWxvY2FsIFNsaWRlclBvcyA9IChOZXdWYWx1ZSAtIE1pbikgLyAoTWF4IC0gTWluKQoJCQkJCgkJCQlTZXRGbGFnKEZsYWcsIE5ld1ZhbHVlKQoJCQkJQ3JlYXRlVHdlZW4oeyBTbGlkZXJJY29uLCAiUG9zaXRpb24iLCBVRGltMi5mcm9tU2NhbGUobWF0aC5jbGFtcChTbGlkZXJQb3MsIDAsIDEpLCAwLjUpLCAwLjMsIHRydWUgfSkKCQkJZW5kO1NldFNsaWRlcihEZWZhdWx0KQoJCQkKCQkJU2xpZGVySWNvbjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlBvc2l0aW9uIik6Q29ubmVjdChVcGRhdGVWYWx1ZXMpVXBkYXRlVmFsdWVzKCkKCQkJCgkJCWxvY2FsIFNsaWRlciA9IHt9CgkJCWZ1bmN0aW9uIFNsaWRlcjpTZXQoTmV3VmFsMSwgTmV3VmFsMikKCQkJCWlmIE5ld1ZhbDEgYW5kIE5ld1ZhbDIgdGhlbgoJCQkJCUxhYmVsRnVuYzpTZXRUaXRsZShOZXdWYWwxKQoJCQkJCUxhYmVsRnVuYzpTZXREZXNjKE5ld1ZhbDIpCgkJCQllbHNlaWYgdHlwZShOZXdWYWwxKSA9PSAic3RyaW5nIiB0aGVuCgkJCQkJTGFiZWxGdW5jOlNldFRpdGxlKE5ld1ZhbDEpCgkJCQllbHNlaWYgdHlwZShOZXdWYWwxKSA9PSAiZnVuY3Rpb24iIHRoZW4KCQkJCQlDYWxsYmFjayA9IE5ld1ZhbDEKCQkJCWVsc2VpZiB0eXBlKE5ld1ZhbDEpID09ICJudW1iZXIiIHRoZW4KCQkJCQlTZXRTbGlkZXIoTmV3VmFsMSkKCQkJCWVuZAoJCQllbmQKCQkJZnVuY3Rpb24gU2xpZGVyOkNhbGxiYWNrKC4uLikgRnVuY3M6SW5zZXJ0Q2FsbGJhY2soQ2FsbGJhY2ssIC4uLikodG9udW1iZXIoRGVmYXVsdCkpIGVuZAoJCQlmdW5jdGlvbiBTbGlkZXI6VmlzaWJsZSguLi4pIEZ1bmNzOlRvZ2dsZVZpc2libGUoQnV0dG9uLCAuLi4pIGVuZAoJCQlmdW5jdGlvbiBTbGlkZXI6RGVzdHJveSgpIEJ1dHRvbjpEZXN0cm95KCkgZW5kCgkJCXJldHVybiBTbGlkZXIKCQllbmQKCQlmdW5jdGlvbiBUYWI6QWRkVGV4dEJveChDb25maWdzKQoJCQlsb2NhbCBUTmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yIENvbmZpZ3MuVGl0bGUgb3IgIlRleHQgQm94IgoJCQlsb2NhbCBURGVzYyA9IENvbmZpZ3MuRGVzYyBvciBDb25maWdzLkRlc2NyaXB0aW9uIG9yICIiCgkJCWxvY2FsIFREZWZhdWx0ID0gQ29uZmlnc1syXSBvciBDb25maWdzLkRlZmF1bHQgb3IgIiIKCQkJbG9jYWwgVFBsYWNlaG9sZGVyVGV4dCA9IENvbmZpZ3NbNV0gb3IgQ29uZmlncy5QbGFjZWhvbGRlclRleHQgb3IgIklucHV0IgoJCQlsb2NhbCBUQ2xlYXJUZXh0ID0gQ29uZmlnc1szXSBvciBDb25maWdzLkNsZWFyVGV4dCBvciBmYWxzZQoJCQlsb2NhbCBDYWxsYmFjayA9IEZ1bmNzOkdldENhbGxiYWNrKENvbmZpZ3MsIDQpCgkJCQoJCQlpZiB0eXBlKFREZWZhdWx0KSB+PSAic3RyaW5nIiBvciBURGVmYXVsdDpnc3ViKCIgIiwgIiIpOmxlbigpIDwgMSB0aGVuCgkJCQlURGVmYXVsdCA9IGZhbHNlCgkJCWVuZAoJCQkKCQkJbG9jYWwgQnV0dG9uLCBMYWJlbEZ1bmMgPSBCdXR0b25GcmFtZShDb250YWluZXIsIFROYW1lLCBURGVzYywgVURpbTIubmV3KDEsIC0zOCkpCgkJCQoJCQlsb2NhbCBTZWxlY3RlZEZyYW1lID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJGcmFtZSIsIEJ1dHRvbiwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDE4KSwKCQkJCVBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0xMCwgMC41KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMC41KSwKCQkJCUJhY2tncm91bmRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgU3Ryb2tlIl0KCQkJfSksICJTdHJva2UiKU1ha2UoIkNvcm5lciIsIFNlbGVjdGVkRnJhbWUsIFVEaW0ubmV3KDAsIDQpKQoJCQkKCQkJbG9jYWwgVGV4dEJveElucHV0ID0gSW5zZXJ0VGhlbWUoQ3JlYXRlKCJUZXh0Qm94IiwgU2VsZWN0ZWRGcmFtZSwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLjg1LCAwLCAwLjg1LCAwKSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCgkJCQlUZXh0U2NhbGVkID0gdHJ1ZSwKCQkJCVRleHRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgVGV4dCJdLAoJCQkJQ2xlYXJUZXh0T25Gb2N1cyA9IFRDbGVhclRleHQsCgkJCQlQbGFjZWhvbGRlclRleHQgPSBUUGxhY2Vob2xkZXJUZXh0LAoJCQkJVGV4dCA9ICIiCgkJCX0pLCAiVGV4dCIpCgkJCQoJCQlsb2NhbCBQZW5jaWwgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBTZWxlY3RlZEZyYW1lLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDAsIDEyLCAwLCAxMiksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAtNSwgMC41KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMC41KSwKCQkJCUltYWdlID0gInJieGFzc2V0aWQ6Ly8xNTYzNzA4MTg3OSIsCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCQl9KQoJCQkKCQkJbG9jYWwgVGV4dEJveCA9IHt9CgkJCWxvY2FsIGZ1bmN0aW9uIElucHV0KCkKCQkJCWxvY2FsIFRleHQgPSBUZXh0Qm94SW5wdXQuVGV4dAoJCQkJaWYgVGV4dDpnc3ViKCIgIiwgIiIpOmxlbigpID4gMCB0aGVuCgkJCQkJaWYgVGV4dEJveC5PbkNoYW5naW5nIHRoZW4gVGV4dCA9IFRleHRCb3guT25DaGFuZ2luZyhUZXh0KSBvciBUZXh0IGVuZAoJCQkJCUZ1bmNzOkZpcmVDYWxsYmFjayhDYWxsYmFjaywgVGV4dCkKCQkJCQlUZXh0Qm94SW5wdXQuVGV4dCA9IFRleHQKCQkJCWVuZAoJCQllbmQKCQkJCgkJCVRleHRCb3hJbnB1dC5Gb2N1c0xvc3Q6Q29ubmVjdChJbnB1dClJbnB1dCgpCgkJCQoJCQlUZXh0Qm94SW5wdXQuRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJQ3JlYXRlVHdlZW4oe1BlbmNpbCwgIkltYWdlQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksIDAuMn0pCgkJCWVuZCkKCQkJVGV4dEJveElucHV0LkZvY3VzZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlDcmVhdGVUd2Vlbih7UGVuY2lsLCAiSW1hZ2VDb2xvcjMiLCBUaGVtZVsiQ29sb3IgVGhlbWUiXSwgMC4yfSkKCQkJZW5kKQoJCQkKCQkJVGV4dEJveC5PbkNoYW5naW5nID0gZmFsc2UKCQkJZnVuY3Rpb24gVGV4dEJveDpWaXNpYmxlKC4uLikgRnVuY3M6VG9nZ2xlVmlzaWJsZShCdXR0b24sIC4uLikgZW5kCgkJCWZ1bmN0aW9uIFRleHRCb3g6RGVzdHJveSgpIEJ1dHRvbjpEZXN0cm95KCkgZW5kCgkJCXJldHVybiBUZXh0Qm94CgkJZW5kCgkJZnVuY3Rpb24gVGFiOkFkZERpc2NvcmRJbnZpdGUoQ29uZmlncykKCQkJbG9jYWwgVGl0bGUgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuTmFtZSBvciBDb25maWdzLlRpdGxlIG9yICJEaXNjb3JkIgoJCQlsb2NhbCBEZXNjID0gQ29uZmlncy5EZXNjIG9yIENvbmZpZ3MuRGVzY3JpcHRpb24gb3IgIiIKCQkJbG9jYWwgTG9nbyA9IENvbmZpZ3NbMl0gb3IgQ29uZmlncy5Mb2dvIG9yICIiCgkJCWxvY2FsIEludml0ZSA9IENvbmZpZ3NbM10gb3IgQ29uZmlncy5JbnZpdGUgb3IgIiIKCQkJCgkJCWxvY2FsIEludml0ZUhvbGRlciA9IENyZWF0ZSgiRnJhbWUiLCBDb250YWluZXIsIHsKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgODApLAoJCQkJTmFtZSA9ICJPcHRpb24iLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCQkJfSkKCQkJCgkJCWxvY2FsIEludml0ZUxhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBJbnZpdGVIb2xkZXIsIHsKCQkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTUpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSksCgkJCQlUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDE1MCwgMjU1KSwKCQkJCUZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZCwKCQkJCVRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAoJCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCgkJCQlUZXh0U2l6ZSA9IDEwLAoJCQkJVGV4dCA9IEludml0ZQoJCQl9KQoJCQkKCQkJbG9jYWwgRnJhbWVIb2xkZXIgPSBJbnNlcnRUaGVtZShDcmVhdGUoIkZyYW1lIiwgSW52aXRlSG9sZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDY1KSwKCQkJCUFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMSksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxKSwKCQkJCUJhY2tncm91bmRDb2xvcjMgPSBUaGVtZVsiQ29sb3IgSHViIDIiXQoJCQl9KSwgIkZyYW1lIilNYWtlKCJDb3JuZXIiLCBGcmFtZUhvbGRlcikKCQkJCgkJCWxvY2FsIEltYWdlTGFiZWwgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBGcmFtZUhvbGRlciwgewoJCQkJU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMCwgMzApLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNywgMCwgNyksCgkJCQlJbWFnZSA9IExvZ28sCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJCQl9KU1ha2UoIkNvcm5lciIsIEltYWdlTGFiZWwsIFVEaW0ubmV3KDAsIDQpKU1ha2UoIlN0cm9rZSIsIEltYWdlTGFiZWwpCgkJCQoJCQlsb2NhbCBMVGl0bGUgPSBJbnNlcnRUaGVtZShDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lSG9sZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDEsIC01MiwgMCwgMTUpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNDQsIDAsIDcpLAoJCQkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkLAoJCQkJVGV4dENvbG9yMyA9IFRoZW1lWyJDb2xvciBUZXh0Il0sCgkJCQlUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKCQkJCUJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAoJCQkJVGV4dFNpemUgPSAxMCwKCQkJCVRleHQgPSBUaXRsZQoJCQl9KSwgIlRleHQiKQoJCQkKCQkJbG9jYWwgTERlc2MgPSBJbnNlcnRUaGVtZShDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lSG9sZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDEsIC01MiwgMCwgMCksCgkJCQlQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA0NCwgMCwgMjIpLAoJCQkJVGV4dFdyYXBwZWQgPSAiWSIsCgkJCQlBdXRvbWF0aWNTaXplID0gIlkiLAoJCQkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW0sCgkJCQlUZXh0Q29sb3IzID0gVGhlbWVbIkNvbG9yIERhcmsgVGV4dCJdLAoJCQkJVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCgkJCQlCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKCQkJCVRleHRTaXplID0gOCwKCQkJCVRleHQgPSBEZXNjCgkJCX0pLCAiRGFya1RleHQiKQoJCQkKCQkJbG9jYWwgSm9pbkJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lSG9sZGVyLCB7CgkJCQlTaXplID0gVURpbTIubmV3KDEsIC0xNCwgMCwgMTYpLAoJCQkJQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDEpLAoJCQkJUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAxLCAtNyksCgkJCQlUZXh0ID0gIkpvaW4iLAoJCQkJRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkLAoJCQkJVGV4dFNpemUgPSAxMiwKCQkJCVRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMjAsIDIyMCwgMjIwKSwKCQkJCUJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgMTUwLCA1MCkKCQkJfSlNYWtlKCJDb3JuZXIiLCBKb2luQnV0dG9uLCBVRGltLm5ldygwLCA1KSkKCQkJCgkJCWxvY2FsIENsaWNrRGVsYXkKCQkJSm9pbkJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlzZXRjbGlwYm9hcmQoSW52aXRlKQoJCQkJaWYgQ2xpY2tEZWxheSB0aGVuIHJldHVybiBlbmQKCQkJCQoJCQkJQ2xpY2tEZWxheSA9IHRydWUKCQkJCVNldFByb3BzKEpvaW5CdXR0b24sIHsKCQkJCQlUZXh0ID0gIkNvcGllZCB0byBDbGlwYm9hcmQiLAoJCQkJCUJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDEwMCwgMTAwKSwKCQkJCQlUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE1MCkKCQkJCX0pdGFzay53YWl0KDUpCgkJCQlTZXRQcm9wcyhKb2luQnV0dG9uLCB7CgkJCQkJVGV4dCA9ICJKb2luIiwKCQkJCQlCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDE1MCwgNTApLAoJCQkJCVRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMjAsIDIyMCwgMjIwKQoJCQkJfSlDbGlja0RlbGF5ID0gZmFsc2UKCQkJZW5kKQoJCQkKCQkJbG9jYWwgRGlzY29yZEludml0ZSA9IHt9CgkJCWZ1bmN0aW9uIERpc2NvcmRJbnZpdGU6RGVzdHJveSgpIEludml0ZUhvbGRlcjpEZXN0cm95KCkgZW5kCgkJCWZ1bmN0aW9uIERpc2NvcmRJbnZpdGU6VmlzaWJsZSguLi4pIEZ1bmNzOlRvZ2dsZVZpc2libGUoSW52aXRlSG9sZGVyLCAuLi4pIGVuZAoJCQlyZXR1cm4gRGlzY29yZEludml0ZQoJCWVuZAoJCXJldHVybiBUYWIKCWVuZAoJCglDbG9zZUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChXaW5kb3cuQ2xvc2VCdG4pCglNaW5pbWl6ZUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChXaW5kb3cuTWluaW1pemVCdG4pCglyZXR1cm4gV2luZG93CmVuZAoKcmV0dXJuIHJlZHpsaWIK"
local decoded = game:GetService("HttpService"):JSONDecode('["' .. b64 .. '"]')[1]
loadstring(decoded)()
